# Day 1: 프로젝트 기획 및 환경 설정 (최신화)

## 산출물 1: 프로젝트 계획서 (LangServe 호환)

### 1. 프로젝트 개요
- **프로젝트명**: AI 스마트 학습도우미 (Smart Learning Assistant)
- **팀명**: TechLearners
- **프로젝트 기간**: 7일 (2025.07.07 ~ 2025.07.14)
- **목적**: LangServe 기반 AI 학습 플랫폼 구축

### 2. 팀 구성 및 역할 분담 (최신 기술 반영)
| 이름 | 역할 | 담당 업무 | GitHub ID | 최신 기술 |
|------|------|-----------|-----------|----------|
| 김철수 | Team Lead/Backend | Spring Boot 3.2, LangServe 연동 | @kimcs | WebClient, JWT 6.x |
| 이영희 | Frontend | React 18, 실시간 스트리밍 UI | @leeyh | SSE, Redux Toolkit |
| 박민수 | AI/ML | LangChain 0.1+, LangServe API | @parkms | LangGraph, RAG |
| 최지우 | DevOps | Docker, CI/CD, 클라우드 배포 | @choijw | K8s, GitHub Actions |
| 한소영 | QA/Docs | 테스트, 문서화, 발표 준비 | @hansy | E2E, API 테스트 |

### 3. 최신 기술 스택 (LangServe 통합)
- **Backend**: Spring Boot 3.2, Spring Security 6.x, JPA, MariaDB
- **Frontend**: React 18, TypeScript, Redux Toolkit, Vite
- **AI/ML**: Python 3.11, LangChain 0.1+, LangServe, FAISS
- **DevOps**: Docker, GitHub Actions, AWS EC2, GCP GKE
- **Tools**: Git, Bruno (API 테스트), Figma, Notion

### 4. 핵심 기능 요구사항 (AI 통합 강화)
#### 4.1 사용자 관리
- [ ] JWT 기반 인증/인가 (Spring Security 6.x)
- [ ] 사용자 프로필 관리
- [ ] 학습 진도 추적
- [ ] AI 사용 통계 및 피드백

#### 4.2 콘텐츠 관리 (AI 최적화)
- [ ] 다중 파일 형식 업로드 (PDF, DOCX, TXT)
- [ ] AI 기반 문서 자동 분류 및 태깅
- [ ] 콘텐츠 버전 관리
- [ ] 벡터 임베딩 생성 및 저장

#### 4.3 AI 학습 지원 (LangServe 기반)
- [ ] LangServe 기반 실시간 질의응답
- [ ] 개인화 학습 추천
- [ ] 자동 퀴즈 생성
- [ ] 학습 요약 제공
- [ ] AI 응답 신뢰도 추적

### 5. 일정 및 마일스톤 (상세화)
| 날짜 | 주요 작업 | 완료 기준 | 담당자 | AI 통합 포인트 |
|------|----------|----------|-------|--------------|
| Day 1 | 프로젝트 셋업, DB 설계 | GitHub 저장소, ERD 완성 | 전체 | 벡터 DB 설계 |
| Day 2 | Backend API 개발 | 사용자/콘텐츠 API 완성 | 김철수 | LangServe 클라이언트 |
| Day 3 | Frontend 개발 | 주요 컴포넌트 구현 | 이영희 | 스트리밍 채팅 UI |
| Day 4 | AI 모듈 통합 | RAG 파이프라인 동작 | 박민수 | LangServe 배포 |
| Day 5 | 컨테이너화 및 CI/CD | 자동 빌드/배포 | 최지우 | AI 서비스 컨테이너화 |
| Day 6 | 클라우드 배포 | 프로덕션 서비스 운영 | 전체 | AI API 라우팅 |
| Day 7 | 최종 점검 및 발표 | 발표 자료 완성 | 한소영 | 성능 테스트 |

### 6. 위험 관리 (AI 통합 고려)
| 위험 요소 | 확률 | 영향도 | 대응 방안 |
|----------|------|--------|----------|
| LangServe API 불안정 | 중 | 높음 | Fallback 모델, 재시도 로직 구현 |
| AI 응답 속도 저하 | 중 | 중 | 캐싱 전략, 스트리밍 응답 |
| 클라우드 배포 실패 | 낮음 | 중 | 로컬 Docker 환경 백업 |
| 팀원 일정 조율 | 높음 | 낮음 | 일일 스탠드업, 유연한 역할 분담 |

## 산출물 2: GitHub Repository 구조 (모노레포)

```
smart-learning-assistant/
├── README.md
├── .gitignore
├── docker-compose.yml
├── docker-compose.dev.yml
├── package.json                # 루트 패키지 관리
├── backend/
│   ├── src/main/java/com/smartlearning/
│   │   ├── config/
│   │   │   └── AIServiceConfig.java      # LangServe 클라이언트 설정
│   │   ├── service/
│   │   │   └── AIIntegrationService.java # AI 통합 서비스
│   │   └── client/
│   │       └── LangServeClient.java      # LangServe 클라이언트
│   ├── Dockerfile
│   └── pom.xml
├── frontend/
│   ├── src/
│   │   ├── components/
│   │   │   └── chat/                     # AI 채팅 컴포넌트
│   │   ├── hooks/
│   │   │   └── useChat.js               # AI 채팅 훅
│   │   └── services/
│   │       └── aiService.js             # AI API 서비스
│   ├── Dockerfile
│   └── package.json
├── ai-module/
│   ├── src/
│   │   ├── api/
│   │   │   └── main.py                  # LangServe FastAPI 서버
│   │   ├── chains/
│   │   │   └── qa_chain.py             # QA 체인
│   │   └── core/
│   │       └── vector_store.py         # 벡터 스토어 관리
│   ├── Dockerfile
│   └── requirements.txt
├── deployment/
│   ├── k8s/                            # Kubernetes 매니페스트
│   └── scripts/                        # 배포 스크립트
├── docs/
│   ├── api/                           # API 문서 (OpenAPI)
│   └── user-guide/                   # 사용자 가이드
└── .github/
    └── workflows/                     # CI/CD 파이프라인
```

## 산출물 3: 데이터베이스 스키마 (AI 최적화)

### 사용자 관리 (AI 통합)
```sql
CREATE TABLE users (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    full_name VARCHAR(100),
    role ENUM('STUDENT', 'TEACHER', 'ADMIN') DEFAULT 'STUDENT',
    learning_level ENUM('BEGINNER', 'INTERMEDIATE', 'ADVANCED') DEFAULT 'BEGINNER',
    -- AI 관련 설정
    ai_preferences JSON DEFAULT '{}',  -- AI 모델 선호도, 응답 스타일 등
    total_ai_interactions INT DEFAULT 0,
    average_session_time INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### 학습 콘텐츠 (벡터 검색 최적화)
```sql
CREATE TABLE learning_contents (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    content_type ENUM('DOCUMENT', 'VIDEO', 'QUIZ', 'SUMMARY'),
    file_path VARCHAR(500),
    file_size BIGINT,
    category VARCHAR(100),
    tags JSON,
    difficulty ENUM('EASY', 'MEDIUM', 'HARD'),
    upload_user_id BIGINT,
    is_public BOOLEAN DEFAULT TRUE,
    -- AI 처리 결과
    ai_summary TEXT,                    -- AI 생성 요약
    ai_keywords JSON,                   -- AI 추출 키워드
    processing_status ENUM('PENDING', 'PROCESSING', 'COMPLETED', 'FAILED') DEFAULT 'PENDING',
    vector_embedding_id VARCHAR(255),   -- 벡터 스토어 참조 ID
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (upload_user_id) REFERENCES users(id)
);
```

### 학습 진도 (AI 분석 강화)
```sql
CREATE TABLE learning_progress (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT,
    content_id BIGINT,
    progress_percentage DECIMAL(5,2) DEFAULT 0.00,
    completion_status ENUM('NOT_STARTED', 'IN_PROGRESS', 'COMPLETED'),
    last_accessed TIMESTAMP,
    study_time_minutes INT DEFAULT 0,
    quiz_score DECIMAL(5,2),
    -- AI 분석 데이터
    comprehension_score DECIMAL(5,2),  -- AI 평가 이해도
    engagement_level ENUM('LOW', 'MEDIUM', 'HIGH'),
    recommended_next_content BIGINT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (content_id) REFERENCES learning_contents(id),
    FOREIGN KEY (recommended_next_content) REFERENCES learning_contents(id),
    UNIQUE KEY unique_user_content (user_id, content_id)
);
```

### AI 질의응답 히스토리 (LangServe 통합)
```sql
CREATE TABLE chat_history (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT,
    content_id BIGINT,
    session_id VARCHAR(255),            -- 대화 세션 구분
    question TEXT NOT NULL,
    answer TEXT,
    -- AI 모델 정보
    model_name VARCHAR(100),            -- 사용된 AI 모델
    confidence_score DECIMAL(5,4),      -- 응답 신뢰도 (0-1)
    response_time_ms INT,               -- 응답 시간 (밀리초)
    token_usage JSON,                   -- 토큰 사용량 정보
    -- 검색 컨텍스트
    retrieved_chunks JSON,              -- 검색된 문서 청크
    search_similarity_scores JSON,      -- 유사도 점수
    -- 사용자 피드백
    feedback ENUM('HELPFUL', 'NOT_HELPFUL', 'PARTIALLY_HELPFUL'),
    feedback_comment TEXT,
    -- 추적 정보
    langsmith_trace_id VARCHAR(255),    -- LangSmith 추적 ID
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (content_id) REFERENCES learning_contents(id)
);
```

### 자동 생성 퀴즈 (AI 강화)
```sql
CREATE TABLE generated_quizzes (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    content_id BIGINT,
    title VARCHAR(255) NOT NULL,
    question TEXT NOT NULL,
    options JSON,
    correct_answer VARCHAR(255),
    explanation TEXT,
    difficulty ENUM('EASY', 'MEDIUM', 'HARD'),
    -- AI 생성 정보
    generation_prompt TEXT,             -- 생성에 사용된 프롬프트
    model_used VARCHAR(100),            -- 사용된 AI 모델
    generation_confidence DECIMAL(5,4), -- 생성 품질 신뢰도
    bloom_taxonomy ENUM('REMEMBER', 'UNDERSTAND', 'APPLY', 'ANALYZE', 'EVALUATE', 'CREATE'),
    -- 성능 지표
    average_score DECIMAL(5,2) DEFAULT 0,
    attempt_count INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (content_id) REFERENCES learning_contents(id)
);
```

### AI 성능 추적
```sql
CREATE TABLE ai_performance_metrics (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    chat_id BIGINT,
    request_timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    -- 성능 지표
    response_latency_ms INT,
    tokens_consumed INT,
    api_cost_usd DECIMAL(10,6),
    -- 품질 지표
    user_satisfaction_score DECIMAL(3,2), -- 1-5 점수
    accuracy_rating DECIMAL(3,2),
    relevance_score DECIMAL(3,2),
    -- 시스템 정보
    server_load_percentage DECIMAL(5,2),
    memory_usage_mb INT,
    FOREIGN KEY (chat_id) REFERENCES chat_history(id)
);
```

## 산출물 4: API 설계 문서 (LangServe 통합)

### 인증 API (최신 JWT)
```
POST /api/v1/auth/login       # 로그인
POST /api/v1/auth/register    # 회원가입
POST /api/v1/auth/refresh     # 토큰 갱신
DELETE /api/v1/auth/logout    # 로그아웃
GET /api/v1/auth/profile      # 프로필 조회
```

### 사용자 관리 API
```
GET /api/v1/users/profile           # 사용자 프로필
PUT /api/v1/users/profile           # 프로필 업데이트
GET /api/v1/users/progress          # 학습 진도 조회
GET /api/v1/users/ai-stats          # AI 사용 통계
PUT /api/v1/users/ai-preferences    # AI 설정 업데이트
```

### 학습 콘텐츠 API (AI 처리 포함)
```
GET /api/v1/contents                    # 콘텐츠 목록
POST /api/v1/contents/upload            # 파일 업로드
GET /api/v1/contents/{id}               # 콘텐츠 상세
PUT /api/v1/contents/{id}               # 콘텐츠 수정
DELETE /api/v1/contents/{id}            # 콘텐츠 삭제
GET /api/v1/contents/categories         # 카테고리 목록
POST /api/v1/contents/{id}/process      # AI 처리 요청
GET /api/v1/contents/{id}/processing-status # 처리 상태 확인
```

### AI 학습 지원 API (LangServe 기반)
```
POST /api/v1/ai/chat                    # AI 채팅 (실시간)
GET /api/v1/ai/chat/stream              # 스트리밍 응답 (SSE)
GET /api/v1/ai/chat/history             # 채팅 기록
POST /api/v1/ai/chat/feedback           # 응답 피드백
POST /api/v1/ai/quiz/generate           # 퀴즈 자동 생성
GET /api/v1/ai/recommendations          # 학습 추천
POST /api/v1/ai/summarize               # 내용 요약
GET /api/v1/ai/performance              # AI 성능 지표
```

### WebSocket API (실시간 통신)
```
WS /api/v1/ws/chat/{userId}            # 실시간 채팅
WS /api/v1/ws/progress/{userId}        # 실시간 진도 업데이트
WS /api/v1/ws/notifications/{userId}   # 실시간 알림
```

## 산출물 5: 환경 설정 및 개발 가이드

### 개발 환경 설정 스크립트
```bash
#!/bin/bash
# setup-dev.sh

echo "🚀 Smart Learning Assistant 개발 환경 설정"

# 1. 필수 도구 확인
check_requirements() {
    echo "📋 필수 도구 확인 중..."
    command -v node >/dev/null 2>&1 || { echo "❌ Node.js 필요"; exit 1; }
    command -v docker >/dev/null 2>&1 || { echo "❌ Docker 필요"; exit 1; }
    command -v python3 >/dev/null 2>&1 || { echo "❌ Python 3.11+ 필요"; exit 1; }
    command -v java >/dev/null 2>&1 || { echo "❌ Java 17+ 필요"; exit 1; }
    echo "✅ 모든 도구 설치 확인 완료"
}

# 2. 환경 파일 생성
setup_env_files() {
    echo "⚙️ 환경 파일 설정 중..."
    
    # Backend 환경 파일
    cat > backend/.env.dev << EOF
# Database
DB_HOST=localhost
DB_PORT=3306
DB_NAME=smart_learning_dev
DB_USER=dev_user
DB_PASSWORD=dev_password

# JWT
JWT_SECRET=dev_jwt_secret_key_for_development_only
JWT_EXPIRATION=24h

# AI Service
AI_SERVICE_URL=http://localhost:8000
OPENAI_API_KEY=your_openai_api_key_here
LANGCHAIN_API_KEY=your_langchain_api_key_here
LANGCHAIN_TRACING_V2=true

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
EOF

    # Frontend 환경 파일
    cat > frontend/.env.development << EOF
VITE_API_BASE_URL=http://localhost:8080/api/v1
VITE_WS_URL=ws://localhost:8080/api/v1/ws
VITE_AI_SERVICE_URL=http://localhost:8000
EOF

    # AI Module 환경 파일
    cat > ai-module/.env << EOF
# LangChain 설정
OPENAI_API_KEY=your_openai_api_key_here
LANGCHAIN_API_KEY=your_langchain_api_key_here
LANGCHAIN_TRACING_V2=true
LANGCHAIN_PROJECT=smart-learning-dev

# 벡터 스토어
VECTOR_STORE_TYPE=faiss
VECTOR_STORE_PATH=./data/vector_store

# 서버 설정
HOST=0.0.0.0
PORT=8000
RELOAD=true
EOF

    echo "✅ 환경 파일 생성 완료"
}

# 3. Docker 서비스 시작
start_docker_services() {
    echo "🐳 Docker 서비스 시작 중..."
    docker-compose -f docker-compose.dev.yml up -d mariadb redis
    echo "⏳ 서비스 초기화 대기..."
    sleep 20
    echo "✅ Docker 서비스 시작 완료"
}

# 4. 데이터베이스 초기화
init_database() {
    echo "🗄️ 데이터베이스 초기화 중..."
    docker-compose -f docker-compose.dev.yml exec mariadb mysql -u root -p"root_password" -e "
        CREATE DATABASE IF NOT EXISTS smart_learning_dev;
        CREATE USER IF NOT EXISTS 'dev_user'@'%' IDENTIFIED BY 'dev_password';
        GRANT ALL PRIVILEGES ON smart_learning_dev.* TO 'dev_user'@'%';
        FLUSH PRIVILEGES;
    "
    echo "✅ 데이터베이스 초기화 완료"
}

# 5. 의존성 설치
install_dependencies() {
    echo "📦 의존성 설치 중..."
    
    # Backend 의존성
    cd backend && ./mvnw clean install -DskipTests && cd ..
    
    # Frontend 의존성
    cd frontend && npm install && cd ..
    
    # AI Module 의존성
    cd ai-module && pip install -r requirements.txt && cd ..
    
    echo "✅ 의존성 설치 완료"
}

# 메인 실행
main() {
    check_requirements
    setup_env_files
    start_docker_services
    init_database
    install_dependencies
    
    echo ""
    echo "🎉 개발 환경 설정 완료!"
    echo ""
    echo "다음 명령어로 각 서비스를 시작하세요:"
    echo "1. AI Service: cd ai-module && uvicorn src.api.main:app --reload"
    echo "2. Backend: cd backend && ./mvnw spring-boot:run"
    echo "3. Frontend: cd frontend && npm run dev"
    echo ""
    echo "🌐 접속 URL:"
    echo "- Frontend: http://localhost:5173"
    echo "- Backend API: http://localhost:8080"
    echo "- AI Service: http://localhost:8000"
    echo "- API Docs: http://localhost:8080/swagger-ui.html"
    echo "- LangServe Playground: http://localhost:8000/docs"
}

main-- 채팅 히스토리 (LangServe 최적화)
CREATE TABLE chat_messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    session_id UUID REFERENCES conversation_sessions(id) ON DELETE CASCADE,
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    content_id UUID REFERENCES learning_contents(id) ON DELETE SET NULL,
    
    -- 메시지 내용
    question TEXT NOT NULL,
    answer TEXT,
    message_type message_type DEFAULT 'QA',
    
    -- AI 메타데이터
    model_name VARCHAR(100),
    prompt_tokens INTEGER,
    completion_tokens INTEGER,
    total_tokens INTEGER,
    confidence_score DECIMAL(5,4),
    response_time_ms INTEGER,
    
    -- 검색 컨텍스트
    retrieved_chunks UUID[],
    search_query TEXT,
    
    -- 사용자 피드백
    feedback feedback_type,
    feedback_comment TEXT,
    
    -- 추적 정보
    trace_id UUID, -- LangSmith 추적 ID
    parent_message_id UUID REFERENCES chat_messages(id),
    
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TYPE message_type AS ENUM ('QA', 'SUMMARY', 'QUIZ_GENERATION', 'EXPLANATION', 'TRANSLATION');
CREATE TYPE feedback_type AS ENUM ('HELPFUL', 'NOT_HELPFUL', 'PARTIALLY_HELPFUL', 'INACCURATE');

-- AI 모델 성능 추적
CREATE TABLE ai_performance_metrics (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    message_id UUID REFERENCES chat_messages(id) ON DELETE CASCADE,
    model_name VARCHAR(100) NOT NULL,
    endpoint VARCHAR(255),
    
    -- 성능 지표
    latency_ms INTEGER NOT NULL,
    tokens_per_second DECIMAL(10,2),
    cost_usd DECIMAL(10,6),
    
    -- 품질 지표
    relevance_score DECIMAL(5,4),
    coherence_score DECIMAL(5,4),
    factual_accuracy DECIMAL(5,4),
    
    -- 에러 정보
    error_code VARCHAR(50),
    error_message TEXT,
    
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 퀴즈 및 평가 시스템
```sql
-- 자동 생성 퀴즈
CREATE TABLE generated_quizzes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    content_id UUID REFERENCES learning_contents(id) ON DELETE CASCADE,
    created_by UUID REFERENCES users(id),
    
    -- 퀴즈 메타데이터
    title VARCHAR(255) NOT NULL,
    description TEXT,
    difficulty difficulty_level DEFAULT 'MEDIUM',
    estimated_time_minutes INTEGER,
    question_count INTEGER NOT NULL,
    
    -- AI 생성 정보
    generation_prompt TEXT,
    model_used VARCHAR(100),
    generation_quality_score DECIMAL(5,4),
    
    -- 상태 관리
    is_published BOOLEAN DEFAULT FALSE,
    is_adaptive BOOLEAN DEFAULT FALSE, -- 적응형 퀴즈 여부
    
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 퀴즈 문제
CREATE TABLE quiz_questions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    quiz_id UUID REFERENCES generated_quizzes(id) ON DELETE CASCADE,
    
    -- 문제 내용
    question_text TEXT NOT NULL,
    question_type question_type DEFAULT 'MULTIPLE_CHOICE',
    options JSONB, -- JSON 배열로 선택지 저장
    correct_answer TEXT NOT NULL,
    explanation TEXT,
    
    -- 난이도 및 태그
    difficulty difficulty_level DEFAULT 'MEDIUM',
    bloom_taxonomy bloom_level,
    tags TEXT[] DEFAULT '{}',
    
    -- 성능 지표
    average_score DECIMAL(5,2) DEFAULT 0,
    attempt_count INTEGER DEFAULT 0,
    
    -- 적응형 학습
    irt_difficulty DECIMAL(10,4), -- Item Response Theory
    irt_discrimination DECIMAL(10,4),
    
    question_order INTEGER NOT NULL,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TYPE question_type AS ENUM ('MULTIPLE_CHOICE', 'TRUE_FALSE', 'SHORT_ANSWER', 'ESSAY', 'MATCHING', 'ORDERING');
CREATE TYPE bloom_level AS ENUM ('REMEMBER', 'UNDERSTAND', 'APPLY', 'ANALYZE', 'EVALUATE', 'CREATE');

-- 퀴즈 응답 및 결과
CREATE TABLE quiz_attempts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    quiz_id UUID REFERENCES generated_quizzes(id) ON DELETE CASCADE,
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    
    -- 시도 정보
    start_time TIMESTAMPTZ NOT NULL,
    end_time TIMESTAMPTZ,
    time_spent_seconds INTEGER,
    
    -- 결과
    total_questions INTEGER NOT NULL,
    correct_answers INTEGER DEFAULT 0,
    score DECIMAL(5,2) DEFAULT 0,
    percentage_score DECIMAL(5,2) DEFAULT 0,
    
    -- 상태
    status attempt_status DEFAULT 'IN_PROGRESS',
    
    -- 적응형 학습 데이터
    ability_estimate DECIMAL(10,4), -- 사용자 능력 추정치
    
    created_at TIMESTAMPTZ DEFAULT NOW(),
    completed_at TIMESTAMPTZ
);

CREATE TYPE attempt_status AS ENUM ('IN_PROGRESS', 'COMPLETED', 'ABANDONED', 'TIME_OUT');

-- 문제별 응답
CREATE TABLE question_responses (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    attempt_id UUID REFERENCES quiz_attempts(id) ON DELETE CASCADE,
    question_id UUID REFERENCES quiz_questions(id) ON DELETE CASCADE,
    
    -- 응답 내용
    user_answer TEXT,
    is_correct BOOLEAN,
    response_time_seconds INTEGER,
    
    -- AI 채점 (주관식용)
    ai_score DECIMAL(5,2),
    ai_feedback TEXT,
    
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 학습 진도 및 분석
```sql
-- 학습 진도 추적
CREATE TABLE learning_progress (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    content_id UUID REFERENCES learning_contents(id) ON DELETE CASCADE,
    
    -- 진도 정보
    progress_percentage DECIMAL(5,2) DEFAULT 0.00,
    completion_status completion_status DEFAULT 'NOT_STARTED',
    
    -- 시간 추적
    first_accessed_at TIMESTAMPTZ,
    last_accessed_at TIMESTAMPTZ,
    total_time_spent_minutes INTEGER DEFAULT 0,
    
    -- 성과 지표
    comprehension_score DECIMAL(5,2),
    engagement_score DECIMAL(5,2),
    retention_score DECIMAL(5,2),
    
    -- 적응형 학습
    recommended_next_content UUID REFERENCES learning_contents(id),
    difficulty_adjustment DECIMAL(3,2) DEFAULT 0, -- -1.0 to 1.0
    
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    
    UNIQUE(user_id, content_id)
);

CREATE TYPE completion_status AS ENUM ('NOT_STARTED', 'IN_PROGRESS', 'COMPLETED', 'MASTERED', 'NEEDS_REVIEW');

-- 학습 세션 (상세 추적)
CREATE TABLE learning_sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    content_id UUID REFERENCES learning_contents(id) ON DELETE CASCADE,
    
    -- 세션 정보
    session_start TIMESTAMPTZ NOT NULL,
    session_end TIMESTAMPTZ,
    duration_minutes INTEGER,
    
    -- 활동 추적
    pages_viewed INTEGER DEFAULT 0,
    questions_asked INTEGER DEFAULT 0,
    notes_taken INTEGER DEFAULT 0,
    
    -- 참여도 지표
    scroll_percentage DECIMAL(5,2),
    time_on_page_avg_seconds INTEGER,
    interaction_count INTEGER DEFAULT 0,
    
    -- 디바이스 정보
    device_type VARCHAR(50),
    browser VARCHAR(100),
    screen_resolution VARCHAR(20),
    
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 학습 경로 추천
CREATE TABLE learning_paths (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    
    -- 경로 정보
    path_name VARCHAR(255) NOT NULL,
    description TEXT,
    estimated_duration_hours INTEGER,
    
    -- AI 생성 정보
    generated_by_ai BOOLEAN DEFAULT FALSE,
    generation_algorithm VARCHAR(100),
    confidence_score DECIMAL(5,4),
    
    -- 상태
    is_active BOOLEAN DEFAULT TRUE,
    completion_percentage DECIMAL(5,2) DEFAULT 0,
    
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 학습 경로 단계
CREATE TABLE learning_path_steps (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    path_id UUID REFERENCES learning_paths(id) ON DELETE CASCADE,
    content_id UUID REFERENCES learning_contents(id) ON DELETE CASCADE,
    
    step_order INTEGER NOT NULL,
    is_required BOOLEAN DEFAULT TRUE,
    estimated_duration_minutes INTEGER,
    
    -- 선수 조건
    prerequisite_steps UUID[],
    minimum_score_required DECIMAL(5,2),
    
    created_at TIMESTAMPTZ DEFAULT NOW(),
    
    UNIQUE(path_id, step_order)
);
```

## 산출물 4: 최신 API 설계 (OpenAPI 3.1)

### 인증 및 사용자 관리 API
```yaml
# openapi.yaml
openapi: 3.1.0
info:
  title: Smart Learning Assistant API
  version: 2.0.0
  description: 차세대 AI 기반 학습 플랫폼 API

paths:
  # 인증 API (OAuth 2.1 + OIDC)
  /api/v2/auth/login:
    post:
      summary: 사용자 로그인
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  minLength: 8
                remember_me:
                  type: boolean
                  default: false
      responses:
        '200':
          description: 로그인 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                  refresh_token:
                    type: string
                  expires_in:
                    type: integer
                  user:
                    $ref: '#/components/schemas/User'

  /api/v2/auth/oauth/{provider}:
    get:
      summary: OAuth 로그인 (Google, GitHub, Discord)
      parameters:
        - name: provider
          in: path
          required: true
          schema:
            type: string
            enum: [google, github, discord]

  # 사용자 관리 API
  /api/v2/users/profile:
    get:
      summary: 사용자 프로필 조회
      security:
        - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
    
    put:
      summary: 사용자 프로필 업데이트
      security:
        - BearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProfileUpdate'

  /api/v2/users/statistics:
    get:
      summary: 사용자 학습 통계
      security:
        - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserStatistics'
```

### AI 학습 지원 API (LangServe 기반)
```yaml
  # AI 채팅 API
  /api/v2/ai/chat:
    post:
      summary: AI와 대화
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  maxLength: 2000
                content_id:
                  type: string
                  format: uuid
                session_id:
                  type: string
                  format: uuid
                stream:
                  type: boolean
                  default: false
                model_preferences:
                  type: object
                  properties:
                    temperature:
                      type: number
                      minimum: 0
                      maximum: 2
                    max_tokens:
                      type: integer
                      minimum: 1
                      maximum: 4000
      responses:
        '200':
          description: AI 응답
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatResponse'
            text/event-stream:
              schema:
                type: string
                description: Server-Sent Events for streaming

  /api/v2/ai/chat/sessions:
    get:
      summary: 대화 세션 목록
      security:
        - BearerAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
    
    post:
      summary: 새 대화 세션 생성
      security:
        - BearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                content_id:
                  type: string
                  format: uuid

  /api/v2/ai/quiz/generate:
    post:
      summary: AI 퀴즈 생성
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content_id:
                  type: string
                  format: uuid
                question_count:
                  type: integer
                  minimum: 1
                  maximum: 50
                  default: 5
                difficulty:
                  type: string
                  enum: [VERY_EASY, EASY, MEDIUM, HARD, VERY_HARD]
                question_types:
                  type: array
                  items:
                    type: string
                    enum: [MULTIPLE_CHOICE, TRUE_FALSE, SHORT_ANSWER]
                bloom_levels:
                  type: array
                  items:
                    type: string
                    enum: [REMEMBER, UNDERSTAND, APPLY, ANALYZE, EVALUATE, CREATE]
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GeneratedQuiz'

  /api/v2/ai/summarize:
    post:
      summary: 콘텐츠 요약 생성
      security:
        - BearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                content_id:
                  type: string
                  format: uuid
                summary_type:
                  type: string
                  enum: [BRIEF, DETAILED, BULLET_POINTS, MIND_MAP]
                language:
                  type: string
                  default: ko
```

### 콘텐츠 관리 API
```yaml
  # 콘텐츠 업로드 및 관리
  /api/v2/contents:
    get:
      summary: 콘텐츠 목록 조회
      parameters:
        - name: category
          in: query
          schema:
            type: string
        - name: difficulty
          in: query
          schema:
            type: string
            enum: [VERY_EASY, EASY, MEDIUM, HARD, VERY_HARD]
        - name: tags
          in: query
          schema:
            type: array
            items:
              type: string
        - name: search
          in: query
          schema:
            type: string
        - name: sort
          in: query
          schema:
            type: string
            enum: [created_at, updated_at, view_count, like_count, relevance]
            default: created_at
        - name: order
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: desc
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ContentSummary'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
    
    post:
      summary: 새 콘텐츠 업로드
      security:
        - BearerAuth: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                title:
                  type: string
                description:
                  type: string
                category:
                  type: string
                tags:
                  type: array
                  items:
                    type: string
                difficulty:
                  type: string
                  enum: [VERY_EASY, EASY, MEDIUM, HARD, VERY_HARD]
                is_public:
                  type: boolean
                  default: true

  /api/v2/contents/{id}/process:
    post:
      summary: AI 기반 콘텐츠 처리
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                extract_keywords:
                  type: boolean
                  default: true
                generate_summary:
                  type: boolean
                  default: true
                calculate_complexity:
                  type: boolean
                  default: true
                create_embeddings:
                  type: boolean
                  default: true
```

## 산출물 5: 최신 개발 환경 설정

### 모노레포 설정 (Nx Workspace)
```json
// nx.json
{
  "extends": "@nx/workspace",
  "namedInputs": {
    "default": ["{projectRoot}/**/*", "sharedGlobals"],
    "production": [
      "default",
      "!{projectRoot}/**/?(*.)+(spec|test).[jt]s?(x)?(.snap)",
      "!{projectRoot}/tsconfig.spec.json"
    ],
    "sharedGlobals": []
  },
  "targetDefaults": {
    "build": {
      "dependsOn": ["^build"],
      "inputs": ["production", "^production"],
      "cache": true
    },
    "test": {
      "inputs": ["default", "^production", "{workspaceRoot}/jest.preset.js"],
      "cache": true
    },
    "lint": {
      "inputs": ["default", "{workspaceRoot}/.eslintrc.json"],
      "cache": true
    }
  },
  "generators": {
    "@nx/react": {
      "application": {
        "style": "tailwind",
        "bundler": "vite",
        "unitTestRunner": "vitest"
      }
    },
    "@nx/node": {
      "application": {
        "bundler": "esbuild"
      }
    }
  }
}
```

### Docker 개발 환경
```yaml
# docker-compose.dev.yml
version: '3.8'

services:
  postgres:
    image: pgvector/pgvector:pg16
    environment:
      POSTGRES_DB: smart_learning_dev
      POSTGRES_USER: dev_user
      POSTGRES_PASSWORD: dev_password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./scripts/init-db.sql:/docker-entrypoint-initdb.d/init.sql

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes

  minio:
    image: minio/minio:latest
    ports:
      - "9000:9000"
      - "9001:9001"
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin123
    command: server /data --console-address ":9001"
    volumes:
      - minio_data:/data

  # 개발용 도구들
  mailhog:
    image: mailhog/mailhog:latest
    ports:
      - "1025:1025"  # SMTP
      - "8025:8025"  # Web UI

  jaeger:
    image: jaegertracing/all-in-one:latest
    ports:
      - "16686:16686"  # Web UI
      - "14268:14268"  # HTTP collector

volumes:
  postgres_data:
  minio_data:
```

### GitHub Actions 워크플로우
```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

env:
  NX_BRANCH: ${{ github.ref_name }}
  NX_CLOUD_ACCESS_TOKEN: ${{ secrets.NX_CLOUD_ACCESS_TOKEN }}

jobs:
  main:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Setup Nx SHAs
        uses: nrwl/nx-set-shas@v4

      - name: Run lint
        run: npx nx affected --target=lint --parallel=3

      - name: Run test
        run: npx nx affected --target=test --parallel=3 --coverage

      - name: Run build
        run: npx nx affected --target=build --parallel=3

      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v4
        with:
          token: ${{ secrets.CODECOV_TOKEN }}

      - name: Run E2E tests
        run: npx nx affected --target=e2e --parallel=1
        if: github.event_name == 'push'

  docker-build:
    runs-on: ubuntu-latest
    needs: main
    if: github.ref == 'refs/heads/main'
    strategy:
      matrix:
        app: [backend, frontend, ai-service]
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Login to GHCR
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Build and push
        uses: docker/build-push-action@v5
        with:
          context: ./apps/${{ matrix.app }}
          push: true
          tags: ghcr.io/${{ github.repository }}/${{ matrix.app }}:latest
          cache-from: type=gha
          cache-to: type=gha,mode=max
```

### 개발 환경 설정 스크립트
```bash
#!/bin/bash
# scripts/setup-dev.sh

set -e

echo "🚀 Smart Learning Assistant 개발 환경 설정 시작..."

# 필수 도구 확인
check_requirements() {
    echo "📋 필수 도구 확인 중..."
    
    command -v node >/dev/null 2>&1 || { echo "❌ Node.js가 필요합니다."; exit 1; }
    command -v docker >/dev/null 2>&1 || { echo "❌ Docker가 필요합니다."; exit 1; }
    command -v git >/dev/null 2>&1 || { echo "❌ Git이 필요합니다."; exit 1; }
    
    echo "✅ 모든 필수 도구가 설치되어 있습니다."
}

# Node.js 의존성 설치
install_dependencies() {
    echo "📦 의존성 설치 중..."
    npm ci
    echo "✅ 의존성 설치 완료"
}

# 환경 파일 생성
setup_env_files() {
    echo "⚙️ 환경 파일 설정 중..."
    
    # Backend 환경 파일
    if [ ! -f "apps/backend/.env.dev" ]; then
        cat > apps/backend/.env.dev << EOF
# Database
DATABASE_URL=postgresql://dev_user:dev_password@localhost:5432/smart_learning_dev
REDIS_URL=redis://localhost:6379

# JWT
JWT_SECRET=dev_jwt_secret_key_for_development_only
JWT_EXPIRATION=24h

# AI Services
OPENAI_API_KEY=your_openai_api_key_here
LANGCHAIN_API_KEY=your_langchain_api_key_here
LANGCHAIN_TRACING_V2=true
LANGCHAIN_PROJECT=smart-learning-dev

# File Storage
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123

# Email (Development)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=""
SMTP_PASS=""
EOF
        echo "✅ Backend 환경 파일 생성 완료"
    fi

    # Frontend 환경 파일
    if [ ! -f "apps/frontend/.env.local" ]; then
        cat > apps/frontend/.env.local << EOF
# API URLs
VITE_API_URL=http://localhost:3001/api/v2
VITE_AI_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:3001

# Feature Flags
VITE_ENABLE_DEV_TOOLS=true
VITE_ENABLE_ANALYTICS=false

# Third-party Services
VITE_GOOGLE_CLIENT_ID=your_google_client_id
VITE_SENTRY_DSN=your_sentry_dsn
EOF
        echo "✅ Frontend 환경 파일 생성 완료"
    fi

    # AI Service 환경 파일
    if [ ! -f "apps/ai-service/.env" ]; then
        cat > apps/ai-service/.env << EOF
# AI Models
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-3.5-turbo
EMBEDDING_MODEL=text-embedding-3-small

# LangChain
LANGCHAIN_API_KEY=your_langchain_api_key_here
LANGCHAIN_TRACING_V2=true
LANGCHAIN_PROJECT=smart-learning-ai-dev

# Database
DATABASE_URL=postgresql://dev_user:dev_password@localhost:5432/smart_learning_dev

# Vector Store
VECTOR_STORE_TYPE=faiss
VECTOR_STORE_PATH=./data/vector_store

# Logging
LOG_LEVEL=DEBUG
EOF
        echo "✅ AI Service 환경 파일 생성 완료"
    fi
}

# Docker 서비스 시작
start_services() {
    echo "🐳 Docker 서비스 시작 중..."
    docker-compose -f docker-compose.dev.yml up -d
    
    echo "⏳ 서비스 초기화 대기 중..."
    sleep 30
    
    # 헬스체크
    echo "🔍 서비스 상태 확인 중..."
    docker-compose -f docker-compose.dev.yml ps
    
    echo "✅ Docker 서비스 시작 완료"
}

# 데이터베이스 마이그레이션
run_migrations() {
    echo "🗄️ 데이터베이스 마이그레이션 실행 중..."
    
    # PostgreSQL 연결 확인
    while ! docker-compose -f docker-compose.dev.yml exec -T postgres pg_isready -U dev_user -d smart_learning_dev; do
        echo "PostgreSQL 연결 대기 중..."
        sleep 2
    done
    
    # 벡터 확장 활성화
    docker-compose -f docker-compose.dev.yml exec -T postgres psql -U dev_user -d smart_learning_dev -c "CREATE EXTENSION IF NOT EXISTS vector;"
    
    echo "✅ 데이터베이스 준비 완료"
}

# 개발 서버 시작 안내
show_next_steps() {
    echo ""
    echo "🎉 개발 환경 설정 완료!"
    echo ""
    echo "다음 명령어로 개발 서버를 시작하세요:"
    echo ""
    echo "# Backend 서버 시작"
    echo "cd apps/backend && npm run dev"
    echo ""
    echo "# Frontend 서버 시작"
    echo "cd apps/frontend && npm run dev"
    echo ""
    echo "# AI Service 시작"
    echo "cd apps/ai-service && python -m uvicorn main:app --reload"
    echo ""
    echo "📱 접속 URL:"
    echo "- Frontend: http://localhost:5173"
    echo "- Backend API: http://localhost:3001"
    echo "- AI Service: http://localhost:8000"
    echo "- Swagger UI: http://localhost:3001/swagger-ui"
    echo "- MailHog: http://localhost:8# Day 1: 프로젝트 기획 및 환경 설정 (최신화)

## 산출물 1: 프로젝트 계획서 (2025년 최신 버전)

### 1. 프로젝트 개요
- **프로젝트명**: AI 스마트 학습도우미 (Smart Learning Assistant)
- **팀명**: TechLearners 2025
- **프로젝트 기간**: 7일 (2025.07.07 ~ 2025.07.14)
- **목적**: 차세대 AI 기반 개인화 학습 플랫폼 구축
- **목표**: 10,000+ MAU, 85% AI 정확도, 99.9% 가용성

### 2. 팀 구성 및 역할 분담 (최신 역할)
| 이름 | 역할 | 담당 업무 | GitHub ID | 전문 기술 |
|------|------|-----------|-----------|----------|
| 김철수 | Tech Lead/Backend | Spring Boot 3.2, LangServe 통합 | @kimcs | WebClient, JWT 6.x |
| 이영희 | Frontend Lead | React 18, 실시간 UI | @leeyh | Concurrent Features |
| 박민수 | AI/ML Engineer | LangChain 0.1+, LangGraph | @parkms | RAG, Streaming |
| 최지우 | DevOps/SRE | K8s, 멀티클라우드 | @choijw | Blue-Green 배포 |
| 한소영 | QA/PM | 테스트 자동화, 제품 관리 | @hansy | E2E, 성능 테스트 |

### 3. 최신 기술 스택 (2025년 표준)
- **Backend**: Spring Boot 3.2, Spring Security 6.x, R2DBC, PostgreSQL 16
- **Frontend**: React 18, TypeScript 5.0, Redux Toolkit 2.0, Vite 5.0
- **AI/ML**: Python 3.11, LangChain 0.1.0+, LangServe, LangGraph, FAISS
- **Infrastructure**: Docker 25+, Kubernetes 1.29, Helm 3.14
- **Cloud**: AWS EKS, GCP GKE, Azure AKS (멀티클라우드)
- **Monitoring**: OpenTelemetry, Prometheus, Grafana, Jaeger
- **Tools**: GitHub Copilot, Cursor IDE, Bruno (Postman 대안), Linear

### 4. 핵심 기능 요구사항 (강화)
#### 4.1 사용자 관리 (고도화)
- [ ] OAuth 2.1 + OIDC 기반 인증
- [ ] RBAC + ABAC 하이브리드 권한 관리
- [ ] 사용자 프로필 AI 기반 개인화
- [ ] 학습 패턴 실시간 분석
- [ ] 멀티 테넌트 지원

#### 4.2 콘텐츠 관리 (AI 강화)
- [ ] AI 기반 자동 콘텐츠 분류 및 태깅
- [ ] 실시간 협업 편집 (Google Docs 스타일)
- [ ] 버전 관리 및 변경 추적
- [ ] 다국어 자동 번역
- [ ] 접근성 자동 최적화 (WCAG 2.2)

#### 4.3 AI 학습 지원 (차세대)
- [ ] LangGraph 기반 복합 추론
- [ ] 실시간 스트리밍 응답 (<3초 첫 응답)
- [ ] 멀티모달 AI (텍스트+이미지+음성)
- [ ] 개인화 학습 경로 생성
- [ ] 실시간 학습 성과 예측

#### 4.4 실시간 인터랙션
- [ ] WebRTC 기반 화상 학습
- [ ] 음성 인터페이스 (STT/TTS)
- [ ] 실시간 협업 화이트보드
- [ ] 라이브 퀴즈 및 투표
- [ ] 소셜 학습 피드

### 5. 일정 및 마일스톤 (세분화)
| 날짜 | 주요 작업 | 완료 기준 | 담당자 | 성공 지표 |
|------|----------|----------|-------|----------|
| Day 1 | 프로젝트 셋업, 아키텍처 설계 | GitHub, ERD, API 스펙 | 전체 | 100% 환경 구축 |
| Day 2 | Backend 핵심 API | JWT 인증, CRUD 완성 | 김철수 | 20+ API 엔드포인트 |
| Day 3 | Frontend 기본 UI | 로그인, 대시보드 | 이영희 | 5+ React 컴포넌트 |
| Day 4 | AI 모듈 통합 | RAG 파이프라인 동작 | 박민수 | 85% 답변 정확도 |
| Day 5 | 통합 테스트, 컨테이너화 | E2E 테스트 통과 | 전체 | 95% 테스트 커버리지 |
| Day 6 | 클라우드 배포, 모니터링 | 프로덕션 서비스 | 최지우 | 99% 가용성 달성 |
| Day 7 | 성능 최적화, 발표 준비 | 발표 자료 완성 | 한소영 | <2초 평균 응답시간 |

### 6. 위험 관리 (상세화)
| 위험 요소 | 확률 | 영향도 | 대응 방안 | 담당자 | 모니터링 |
|----------|------|--------|----------|-------|----------|
| LangServe API 불안정 | 중 | 높음 | Fallback 모델, 재시도 로직 | 박민수 | 응답시간 추적 |
| K8s 배포 복잡성 | 중 | 중 | Helm 차트, 로컬 Docker 백업 | 최지우 | 배포 성공률 |
| React 18 호환성 | 낮음 | 중 | 점진적 마이그레이션 | 이영희 | 빌드 에러 모니터링 |
| 팀 협업 이슈 | 높음 | 낮음 | 일일 스탠드업, Pair Programming | 전체 | 일일 진도 체크 |
| AI 응답 품질 | 중 | 높음 | A/B 테스트, 피드백 루프 | 박민수 | 신뢰도 스코어 |

## 산출물 2: 현대적 Repository 구조

```
smart-learning-assistant/
├── 📁 .github/
│   ├── workflows/           # GitHub Actions CI/CD
│   ├── ISSUE_TEMPLATE/     # 이슈 템플릿
│   └── pull_request_template.md
├── 📁 apps/                # 모노레포 구조
│   ├── backend/            # Spring Boot 3.2
│   ├── frontend/           # React 18 + Vite
│   ├── ai-service/         # LangServe API
│   └── mobile/             # React Native (미래)
├── 📁 packages/            # 공유 라이브러리
│   ├── shared-types/       # TypeScript 타입 정의
│   ├── ui-components/      # 재사용 UI 컴포넌트
│   └── utils/              # 공통 유틸리티
├── 📁 infrastructure/      # IaC 및 배포
│   ├── helm/              # Helm 차트
│   ├── terraform/         # 인프라 코드
│   ├── k8s/              # Kubernetes 매니페스트
│   └── monitoring/        # 모니터링 설정
├── 📁 docs/               # 문서화
│   ├── api/              # API 문서 (OpenAPI)
│   ├── architecture/     # 아키텍처 다이어그램
│   ├── user-guide/       # 사용자 가이드
│   └── development/      # 개발 가이드
├── 📁 tests/             # 통합 테스트
│   ├── e2e/             # E2E 테스트 (Playwright)
│   ├── load/            # 로드 테스트 (K6)
│   └── security/        # 보안 테스트
├── 📁 scripts/           # 자동화 스크립트
│   ├── setup.sh         # 개발 환경 셋업
│   ├── deploy.sh        # 배포 스크립트
│   └── migrate.sh       # DB 마이그레이션
├── docker-compose.yml    # 로컬 개발 환경
├── docker-compose.prod.yml # 프로덕션 환경
├── nx.json              # Nx 모노레포 설정
├── package.json         # 루트 패키지 설정
└── README.md           # 프로젝트 소개
```

## 산출물 3: 최신 데이터베이스 스키마 (PostgreSQL 16)

### 사용자 관리 (확장)
```sql
-- 사용자 기본 정보
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    full_name VARCHAR(100),
    avatar_url TEXT,
    role user_role DEFAULT 'STUDENT',
    learning_level learning_level DEFAULT 'BEGINNER',
    preferences JSONB DEFAULT '{}',
    timezone VARCHAR(50) DEFAULT 'UTC',
    language VARCHAR(10) DEFAULT 'ko',
    is_active BOOLEAN DEFAULT TRUE,
    email_verified BOOLEAN DEFAULT FALSE,
    last_login_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 사용자 역할 및 레벨 열거형
CREATE TYPE user_role AS ENUM ('STUDENT', 'TEACHER', 'ADMIN', 'ORGANIZATION');
CREATE TYPE learning_level AS ENUM ('BEGINNER', 'INTERMEDIATE', 'ADVANCED', 'EXPERT');

-- 사용자 세션 (JWT 추적)
CREATE TABLE user_sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    refresh_token_hash VARCHAR(255) NOT NULL,
    device_info JSONB,
    ip_address INET,
    expires_at TIMESTAMPTZ NOT NULL,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 사용자 학습 통계
CREATE TABLE user_statistics (
    user_id UUID PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,
    total_study_time_minutes INTEGER DEFAULT 0,
    questions_asked INTEGER DEFAULT 0,
    quizzes_completed INTEGER DEFAULT 0,
    average_quiz_score DECIMAL(5,2) DEFAULT 0,
    streak_days INTEGER DEFAULT 0,
    last_activity_at TIMESTAMPTZ,
    updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 학습 콘텐츠 (AI 최적화)
```sql
-- 학습 콘텐츠
CREATE TABLE learning_contents (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title VARCHAR(255) NOT NULL,
    description TEXT,
    content_type content_type NOT NULL,
    file_path TEXT,
    file_size BIGINT,
    mime_type VARCHAR(100),
    category VARCHAR(100),
    tags TEXT[] DEFAULT '{}',
    difficulty difficulty_level DEFAULT 'MEDIUM',
    estimated_duration_minutes INTEGER,
    upload_user_id UUID REFERENCES users(id),
    organization_id UUID, -- 멀티 테넌트 지원
    is_public BOOLEAN DEFAULT TRUE,
    is_featured BOOLEAN DEFAULT FALSE,
    view_count INTEGER DEFAULT 0,
    like_count INTEGER DEFAULT 0,
    -- AI 메타데이터
    ai_summary TEXT,
    ai_keywords TEXT[],
    ai_complexity_score DECIMAL(3,2),
    -- 벡터 검색을 위한 임베딩
    content_embedding vector(1536), -- OpenAI ada-002 차원
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TYPE content_type AS ENUM ('DOCUMENT', 'VIDEO', 'AUDIO', 'IMAGE', 'QUIZ', 'INTERACTIVE');
CREATE TYPE difficulty_level AS ENUM ('VERY_EASY', 'EASY', 'MEDIUM', 'HARD', 'VERY_HARD');

-- 콘텐츠 버전 관리
CREATE TABLE content_versions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    content_id UUID REFERENCES learning_contents(id) ON DELETE CASCADE,
    version_number INTEGER NOT NULL,
    change_summary TEXT,
    file_path TEXT,
    created_by UUID REFERENCES users(id),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(content_id, version_number)
);

-- 콘텐츠 청크 (RAG 최적화)
CREATE TABLE content_chunks (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    content_id UUID REFERENCES learning_contents(id) ON DELETE CASCADE,
    chunk_index INTEGER NOT NULL,
    chunk_text TEXT NOT NULL,
    chunk_embedding vector(1536),
    metadata JSONB DEFAULT '{}',
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(content_id, chunk_index)
);
```

### AI 대화 시스템 (고도화)
```sql
-- 대화 세션
CREATE TABLE conversation_sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    content_id UUID REFERENCES learning_contents(id) ON DELETE SET NULL,
    session_name VARCHAR(255),
    context_summary TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 채팅 히스토리