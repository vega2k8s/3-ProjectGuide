# Day 4: AI ê¸°ëŠ¥ í†µí•© (ì´ˆê¸‰ììš©)

## ğŸ¯ ì˜¤ëŠ˜ì˜ ëª©í‘œ
- ê°„ë‹¨í•œ AI ì±„íŒ… API ë§Œë“¤ê¸°
- íŒŒì¼ ë‚´ìš© ì½ì–´ì„œ AIì—ê²Œ ì§ˆë¬¸í•˜ê¸°
- Frontendì— ì±„íŒ… í™”ë©´ ë§Œë“¤ê¸°
- Backendì™€ AI ëª¨ë“ˆ ì—°ê²°í•˜ê¸°

## 1. AI ëª¨ë“ˆ ê¸°ë³¸ ì„¤ì •

### 1-1. ê°„ë‹¨í•œ FastAPI ì„œë²„ ğŸ¤–
```python
# ai-module/main.py
from fastapi import FastAPI, HTTPException, UploadFile, File
from fastapi.middleware.cors import CORSMiddleware
from pydantic import BaseModel
import openai
import os
import PyPDF2
import io
from typing import Optional

# FastAPI ì•± ìƒì„±
app = FastAPI(title="AI Learning Assistant", version="1.0.0")

# CORS ì„¤ì • (Reactì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡)
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000", "http://localhost:8080"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# OpenAI API í‚¤ ì„¤ì •
openai.api_key = os.getenv("OPENAI_API_KEY", "your-api-key-here")

# ìš”ì²­/ì‘ë‹µ ëª¨ë¸ ì •ì˜
class ChatRequest(BaseModel):
    question: str
    file_content: Optional[str] = None
    user_id: int

class ChatResponse(BaseModel):
    answer: str
    success: bool
    message: str = "ì„±ê³µ"

# ê°„ë‹¨í•œ ë©”ëª¨ë¦¬ ì €ì¥ì†Œ (ì‹¤ì œë¡œëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©)
file_contents = {}  # {file_id: content}
chat_history = {}   # {user_id: [messages]}

@app.get("/")
def read_root():
    """AI ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸"""
    return {"message": "AI Learning Assistantê°€ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤!", "status": "healthy"}

@app.get("/health")
def health_check():
    """í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸"""
    return {"status": "healthy", "service": "AI Learning Assistant"}

@app.post("/chat", response_model=ChatResponse)
async def chat_with_ai(request: ChatRequest):
    """AIì™€ ì±„íŒ…í•˜ê¸°"""
    try:
        # ì‹œìŠ¤í…œ ë©”ì‹œì§€ ì„¤ì •
        system_message = "ë‹¹ì‹ ì€ ë„ì›€ì´ ë˜ëŠ” AI í•™ìŠµ ë„ìš°ë¯¸ì…ë‹ˆë‹¤. í•œêµ­ì–´ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”."
        
        # íŒŒì¼ ë‚´ìš©ì´ ìˆìœ¼ë©´ í¬í•¨
        if request.file_content:
            system_message += f"\n\në‹¤ìŒì€ ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ë¬¸ì„œì˜ ë‚´ìš©ì…ë‹ˆë‹¤:\n{request.file_content[:2000]}"
        
        # OpenAI API í˜¸ì¶œ
        response = openai.ChatCompletion.create(
            model="gpt-3.5-turbo",
            messages=[
                {"role": "system", "content": system_message},
                {"role": "user", "content": request.question}
            ],
            max_tokens=500,
            temperature=0.7
        )
        
        answer = response.choices[0].message.content
        
        # ì±„íŒ… ê¸°ë¡ ì €ì¥
        if request.user_id not in chat_history:
            chat_history[request.user_id] = []
        
        chat_history[request.user_id].append({
            "question": request.question,
            "answer": answer
        })
        
        return ChatResponse(
            answer=answer,
            success=True,
            message="AI ì‘ë‹µì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."
        )
        
    except Exception as e:
        print(f"AI ì±„íŒ… ì˜¤ë¥˜: {str(e)}")
        return ChatResponse(
            answer="ì£„ì†¡í•©ë‹ˆë‹¤. AI ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",
            success=False,
            message=str(e)
        )

@app.post("/upload-text")
async def extract_text_from_file(file: UploadFile = File(...)):
    """ì—…ë¡œë“œëœ íŒŒì¼ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ"""
    try:
        content = ""
        
        if file.filename.endswith('.txt'):
            # í…ìŠ¤íŠ¸ íŒŒì¼ ì½ê¸°
            content = (await file.read()).decode('utf-8')
            
        elif file.filename.endswith('.pdf'):
            # PDF íŒŒì¼ ì½ê¸°
            pdf_content = await file.read()
            pdf_file = io.BytesIO(pdf_content)
            pdf_reader = PyPDF2.PdfReader(pdf_file)
            
            # ëª¨ë“  í˜ì´ì§€ì˜ í…ìŠ¤íŠ¸ ì¶”ì¶œ
            for page in pdf_reader.pages:
                content += page.extract_text() + "\n"
        
        else:
            raise HTTPException(status_code=400, detail="ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤.")
        
        return {
            "success": True,
            "content": content[:5000],  # ì²˜ìŒ 5000ìë§Œ ë°˜í™˜
            "filename": file.filename,
            "length": len(content)
        }
        
    except Exception as e:
        print(f"íŒŒì¼ í…ìŠ¤íŠ¸ ì¶”ì¶œ ì˜¤ë¥˜: {str(e)}")
        raise HTTPException(status_code=500, detail=f"íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜: {str(e)}")

@app.get("/chat-history/{user_id}")
def get_chat_history(user_id: int):
    """ì‚¬ìš©ìì˜ ì±„íŒ… ê¸°ë¡ ì¡°íšŒ"""
    return {
        "success": True,
        "history": chat_history.get(user_id, []),
        "count": len(chat_history.get(user_id, []))
    }

# ê°„ë‹¨í•œ í€´ì¦ˆ ìƒì„± (ë³´ë„ˆìŠ¤ ê¸°ëŠ¥)
@app.post("/generate-quiz")
async def generate_quiz(request: ChatRequest):
    """íŒŒì¼ ë‚´ìš© ê¸°ë°˜ ê°„ë‹¨í•œ í€´ì¦ˆ ìƒì„±"""
    try:
        if not request.file_content:
            raise HTTPException(status_code=400, detail="í€´ì¦ˆë¥¼ ìƒì„±í•  íŒŒì¼ ë‚´ìš©ì´ í•„ìš”í•©ë‹ˆë‹¤.")
        
        quiz_prompt = f"""
        ë‹¤ìŒ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ê°„ë‹¨í•œ ê°ê´€ì‹ ë¬¸ì œ 3ê°œë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”.
        ê° ë¬¸ì œëŠ” ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:
        
        ë¬¸ì œ 1: [ì§ˆë¬¸]
        1) [ì„ íƒì§€1]
        2) [ì„ íƒì§€2]
        3) [ì„ íƒì§€3]
        4) [ì„ íƒì§€4]
        ì •ë‹µ: [ë²ˆí˜¸]
        
        ë‚´ìš©: {request.file_content[:1500]}
        """
        
        response = openai.ChatCompletion.create(
            model="gpt-3.5-turbo",
            messages=[
                {"role": "system", "content": "ë‹¹ì‹ ì€ êµìœ¡ìš© í€´ì¦ˆë¥¼ ë§Œë“œëŠ” ì „ë¬¸ê°€ì…ë‹ˆë‹¤."},
                {"role": "user", "content": quiz_prompt}
            ],
            max_tokens=800,
            temperature=0.5
        )
        
        quiz_content = response.choices[0].message.content
        
        return {
            "success": True,
            "quiz": quiz_content,
            "message": "í€´ì¦ˆê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."
        }
        
    except Exception as e:
        print(f"í€´ì¦ˆ ìƒì„± ì˜¤ë¥˜: {str(e)}")
        return {
            "success": False,
            "quiz": "",
            "message": f"í€´ì¦ˆ ìƒì„± ì¤‘ ì˜¤ë¥˜: {str(e)}"
        }

if __name__ == "__main__":
    import uvicorn
    print("ğŸ¤– AI Learning Assistant ì‹œì‘ ì¤‘...")
    print("ğŸ“ Swagger UI: http://localhost:8000/docs")
    uvicorn.run(app, host="0.0.0.0", port=8000, reload=True)
```

### 1-2. í™˜ê²½ë³€ìˆ˜ ì„¤ì • ğŸ”‘
```bash
# ai-module/.env
OPENAI_API_KEY=your-openai-api-key-here

# ì‹¤ì œ OpenAI API í‚¤ë¥¼ ë°œê¸‰ë°›ì•„ì„œ ì…ë ¥í•˜ì„¸ìš”
# https://platform.openai.com/api-keys
```

## 2. Backendì—ì„œ AI ì„œë¹„ìŠ¤ ì—°ë™

### 2-1. AI ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸ ğŸ”Œ
```java
// backend/src/main/java/com/smartlearning/service/AIService.java
package com.smartlearning.service;

import org.springframework.stereotype.Service;
import org.springframework.web.reactive.function.client.WebClient;
import org.springframework.core.io.ByteArrayResource;
import org.springframework.http.MediaType;
import org.springframework.web.multipart.MultipartFile;
import org.springframework.util.LinkedMultiValueMap;
import org.springframework.util.MultiValueMap;

import java.util.Map;
import java.util.HashMap;

@Service
public class AIService {
    
    private final WebClient webClient;
    private final String AI_SERVICE_URL = "http://localhost:8000";
    
    public AIService() {
        this.webClient = WebClient.builder()
                .baseUrl(AI_SERVICE_URL)
                .build();
    }
    
    // AIì™€ ì±„íŒ…
    public Map<String, Object> chatWithAI(String question, String fileContent, Long userId) {
        try {
            Map<String, Object> requestBody = new HashMap<>();
            requestBody.put("question", question);
            requestBody.put("file_content", fileContent);
            requestBody.put("user_id", userId);
            
            Map<String, Object> response = webClient.post()
                    .uri("/chat")
                    .contentType(MediaType.APPLICATION_JSON)
                    .bodyValue(requestBody)
                    .retrieve()
                    .bodyToMono(Map.class)
                    .block();
            
            return response;
            
        } catch (Exception e) {
            System.out.println("AI ì±„íŒ… ì˜¤ë¥˜: " + e.getMessage());
            Map<String, Object> errorResponse = new HashMap<>();
            errorResponse.put("success", false);
            errorResponse.put("answer", "AI ì„œë¹„ìŠ¤ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            errorResponse.put("message", e.getMessage());
            return errorResponse;
        }
    }
    
    // íŒŒì¼ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ
    public Map<String, Object> extractTextFromFile(MultipartFile file) {
        try {
            // MultipartFileì„ AI ì„œë¹„ìŠ¤ë¡œ ì „ì†¡
            MultiValueMap<String, Object> parts = new LinkedMultiValueMap<>();
            parts.add("file", new ByteArrayResource(file.getBytes()) {
                @Override
                public String getFilename() {
                    return file.getOriginalFilename();
                }
            });
            
            Map<String, Object> response = webClient.post()
                    .uri("/upload-text")
                    .contentType(MediaType.MULTIPART_FORM_DATA)
                    .bodyValue(parts)
                    .retrieve()
                    .bodyToMono(Map.class)
                    .block();
            
            return response;
            
        } catch (Exception e) {
            System.out.println("í…ìŠ¤íŠ¸ ì¶”ì¶œ ì˜¤ë¥˜: " + e.getMessage());
            Map<String, Object> errorResponse = new HashMap<>();
            errorResponse.put("success", false);
            errorResponse.put("content", "");
            errorResponse.put("message", e.getMessage());
            return errorResponse;
        }
    }
    
    // í€´ì¦ˆ ìƒì„±
    public Map<String, Object> generateQuiz(String fileContent, Long userId) {
        try {
            Map<String, Object> requestBody = new HashMap<>();
            requestBody.put("question", "í€´ì¦ˆë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”");
            requestBody.put("file_content", fileContent);
            requestBody.put("user_id", userId);
            
            Map<String, Object> response = webClient.post()
                    .uri("/generate-quiz")
                    .contentType(MediaType.APPLICATION_JSON)
                    .bodyValue(requestBody)
                    .retrieve()
                    .bodyToMono(Map.class)
                    .block();
            
            return response;
            
        } catch (Exception e) {
            System.out.println("í€´ì¦ˆ ìƒì„± ì˜¤ë¥˜: " + e.getMessage());
            Map<String, Object> errorResponse = new HashMap<>();
            errorResponse.put("success", false);
            errorResponse.put("quiz", "");
            errorResponse.put("message", e.getMessage());
            return errorResponse;
        }
    }
    
    // AI ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
    public boolean isAIServiceHealthy() {
        try {
            Map<String, Object> response = webClient.get()
                    .uri("/health")
                    .retrieve()
                    .bodyToMono(Map.class)
                    .block();
            
            return "healthy".equals(response.get("status"));
            
        } catch (Exception e) {
            System.out.println("AI ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì‹¤íŒ¨: " + e.getMessage());
            return false;
        }
    }
}
```

### 2-2. ì±„íŒ… íˆìŠ¤í† ë¦¬ Entity ì¶”ê°€ ğŸ’¬
```java
// backend/src/main/java/com/smartlearning/entity/ChatHistory.java
package com.smartlearning.entity;

import jakarta.persistence.*;
import org.hibernate.annotations.CreationTimestamp;
import java.time.LocalDateTime;

@Entity
@Table(name = "chat_history")
public class ChatHistory {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(nullable = false)
    private Long userId;
    
    @Column(nullable = true)
    private Long fileId;
    
    @Column(columnDefinition = "TEXT", nullable = false)
    private String question;
    
    @Column(columnDefinition = "TEXT")
    private String answer;
    
    @CreationTimestamp
    private LocalDateTime createdAt;
    
    // ê¸°ë³¸ ìƒì„±ì
    public ChatHistory() {}
    
    // ìƒì„±ì
    public ChatHistory(Long userId, String question, String answer) {
        this.userId = userId;
        this.question = question;
        this.answer = answer;
    }
    
    // Getterì™€ Setter
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    
    public Long getUserId() { return userId; }
    public void setUserId(Long userId) { this.userId = userId; }
    
    public Long getFileId() { return fileId; }
    public void setFileId(Long fileId) { this.fileId = fileId; }
    
    public String getQuestion() { return question; }
    public void setQuestion(String question) { this.question = question; }
    
    public String getAnswer() { return answer; }
    public void setAnswer(String answer) { this.answer = answer; }
    
    public LocalDateTime getCreatedAt() { return createdAt; }
    public void setCreatedAt(LocalDateTime createdAt) { this.createdAt = createdAt; }
}
```

### 2-3. ì±„íŒ… Repository ğŸ“
```java
// backend/src/main/java/com/smartlearning/repository/ChatHistoryRepository.java
package com.smartlearning.repository;

import com.smartlearning.entity.ChatHistory;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;
import java.util.List;

@Repository
public interface ChatHistoryRepository extends JpaRepository<ChatHistory, Long> {
    
    // ì‚¬ìš©ìë³„ ì±„íŒ… ê¸°ë¡ ì¡°íšŒ (ìµœì‹ ìˆœ)
    List<ChatHistory> findByUserIdOrderByCreatedAtDesc(Long userId);
    
    // íŠ¹ì • íŒŒì¼ê³¼ ê´€ë ¨ëœ ì±„íŒ… ê¸°ë¡
    List<ChatHistory> findByUserIdAndFileIdOrderByCreatedAtDesc(Long userId, Long fileId);
    
    // ì‚¬ìš©ìë³„ ìµœê·¼ Nê°œ ì±„íŒ… ê¸°ë¡
    List<ChatHistory> findTop10ByUserIdOrderByCreatedAtDesc(Long userId);
}
```

### 2-4. AI ì»¨íŠ¸ë¡¤ëŸ¬ ğŸ®
```java
// backend/src/main/java/com/smartlearning/controller/AIController.java
package com.smartlearning.controller;

import com.smartlearning.dto.ApiResponse;
import com.smartlearning.entity.ChatHistory;
import com.smartlearning.entity.UploadedFile;
import com.smartlearning.service.AIService;
import com.smartlearning.service.FileService;
import com.smartlearning.repository.ChatHistoryRepository;
import com.smartlearning.repository.FileRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;

import java.io.File;
import java.io.FileInputStream;
import java.util.List;
import java.util.Map;
import java.util.HashMap;

@RestController
@RequestMapping("/api/ai")
@CrossOrigin(origins = "http://localhost:3000")
public class AIController {
    
    @Autowired
    private AIService aiService;
    
    @Autowired
    private ChatHistoryRepository chatHistoryRepository;
    
    @Autowired
    private FileRepository fileRepository;
    
    // AIì™€ ì±„íŒ…
    @PostMapping("/chat")
    public ApiResponse<Map<String, Object>> chatWithAI(@RequestBody Map<String, Object> request) {
        try {
            String question = (String) request.get("question");
            Long userId = Long.valueOf(request.get("userId").toString());
            Long fileId = request.get("fileId") != null ? 
                Long.valueOf(request.get("fileId").toString()) : null;
            
            String fileContent = "";
            
            // íŒŒì¼ì´ ì§€ì •ëœ ê²½ìš° íŒŒì¼ ë‚´ìš© ì½ê¸°
            if (fileId != null) {
                UploadedFile file = fileRepository.findById(fileId).orElse(null);
                if (file != null) {
                    // íŒŒì¼ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ (ê°„ë‹¨í•œ ë°©ë²•)
                    fileContent = readFileContent(file.getFilePath());
                }
            }
            
            // AI ì„œë¹„ìŠ¤ í˜¸ì¶œ
            Map<String, Object> aiResponse = aiService.chatWithAI(question, fileContent, userId);
            
            // ì±„íŒ… ê¸°ë¡ ì €ì¥
            if ((Boolean) aiResponse.get("success")) {
                ChatHistory chatHistory = new ChatHistory(userId, question, (String) aiResponse.get("answer"));
                if (fileId != null) {
                    chatHistory.setFileId(fileId);
                }
                chatHistoryRepository.save(chatHistory);
            }
            
            return ApiResponse.success(aiResponse);
            
        } catch (Exception e) {
            Map<String, Object> errorResponse = new HashMap<>();
            errorResponse.put("success", false);
            errorResponse.put("answer", "ì±„íŒ… ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            errorResponse.put("message", e.getMessage());
            return ApiResponse.error(e.getMessage());
        }
    }
    
    // íŒŒì¼ ê¸°ë°˜ í€´ì¦ˆ ìƒì„±
    @PostMapping("/quiz")
    public ApiResponse<Map<String, Object>> generateQuiz(@RequestBody Map<String, Object> request) {
        try {
            Long userId = Long.valueOf(request.get("userId").toString());
            Long fileId = Long.valueOf(request.get("fileId").toString());
            
            // íŒŒì¼ ë‚´ìš© ì½ê¸°
            UploadedFile file = fileRepository.findById(fileId)
                .orElseThrow(() -> new RuntimeException("íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
            
            String fileContent = readFileContent(file.getFilePath());
            
            // AI ì„œë¹„ìŠ¤ë¡œ í€´ì¦ˆ ìƒì„± ìš”ì²­
            Map<String, Object> quizResponse = aiService.generateQuiz(fileContent, userId);
            
            return ApiResponse.success(quizResponse);
            
        } catch (Exception e) {
            Map<String, Object> errorResponse = new HashMap<>();
            errorResponse.put("success", false);
            errorResponse.put("quiz", "");
            errorResponse.put("message", e.getMessage());
            return ApiResponse.error(e.getMessage());
        }
    }
    
    // ì±„íŒ… ê¸°ë¡ ì¡°íšŒ
    @GetMapping("/chat-history/{userId}")
    public ApiResponse<List<ChatHistory>> getChatHistory(@PathVariable Long userId) {
        try {
            List<ChatHistory> history = chatHistoryRepository.findTop10ByUserIdOrderByCreatedAtDesc(userId);
            return ApiResponse.success(history);
        } catch (Exception e) {
            return ApiResponse.error("ì±„íŒ… ê¸°ë¡ ì¡°íšŒ ì‹¤íŒ¨: " + e.getMessage());
        }
    }
    
    // íŒŒì¼ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ
    @PostMapping("/extract-text")
    public ApiResponse<Map<String, Object>> extractText(@RequestParam("file") MultipartFile file) {
        try {
            Map<String, Object> response = aiService.extractTextFromFile(file);
            return ApiResponse.success(response);
        } catch (Exception e) {
            return ApiResponse.error("í…ìŠ¤íŠ¸ ì¶”ì¶œ ì‹¤íŒ¨: " + e.getMessage());
        }
    }
    
    // AI ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
    @GetMapping("/health")
    public ApiResponse<Map<String, Object>> checkAIHealth() {
        Map<String, Object> status = new HashMap<>();
        status.put("ai_service_healthy", aiService.isAIServiceHealthy());
        status.put("message", "AI ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì™„ë£Œ");
        return ApiResponse.success(status);
    }
    
    // ê°„ë‹¨í•œ íŒŒì¼ ë‚´ìš© ì½ê¸° (í…ìŠ¤íŠ¸ íŒŒì¼ë§Œ)
    private String readFileContent(String filePath) {
        try {
            File file = new File(filePath);
            if (!file.exists()) {
                return "";
            }
            
            if (filePath.endsWith(".txt")) {
                FileInputStream fis = new FileInputStream(file);
                byte[] data = new byte[(int) file.length()];
                fis.read(data);
                fis.close();
                return new String(data, "UTF-8");
            }
            
            return "íŒŒì¼ ë‚´ìš©ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (PDF ì§€ì› ì˜ˆì •)";
            
        } catch (Exception e) {
            System.out.println("íŒŒì¼ ì½ê¸° ì˜¤ë¥˜: " + e.getMessage());
            return "";
        }
    }
}
```

## 3. Frontendì— AI ì±„íŒ… ê¸°ëŠ¥ ì¶”ê°€

### 3-1. AI ì„œë¹„ìŠ¤ ì¶”ê°€ ğŸ¤–
```javascript
// frontend/src/services/aiService.js
import api from './api';

export const aiService = {
  // AIì™€ ì±„íŒ…
  chat: async (question, userId, fileId = null) => {
    try {
      const response = await api.post('/ai/chat', {
        question,
        userId,
        fileId
      });
      return response.data;
    } catch (error) {
      throw error.response?.data || error;
    }
  },

  // í€´ì¦ˆ ìƒì„±
  generateQuiz: async (userId, fileId) => {
    try {
      const response = await api.post('/ai/quiz', {
        userId,
        fileId
      });
      return response.data;
    } catch (error) {
      throw error.response?.data || error;
    }
  },

  // ì±„íŒ… ê¸°ë¡ ì¡°íšŒ
  getChatHistory: async (userId) => {
    try {
      const response = await api.get(`/ai/chat-history/${userId}`);
      return response.data;
    } catch (error) {
      throw error.response?.data || error;
    }
  },

  // íŒŒì¼ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ
  extractText: async (file) => {
    try {
      const formData = new FormData();
      formData.append('file', file);

      const response = await api.post('/ai/extract-text', formData, {
        headers: {
          'Content-Type': 'multipart/form-data',
        },
      });
      return response.data;
    } catch (error) {
      throw error.response?.data || error;
    }
  },

  // AI ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
  checkHealth: async () => {
    try {
      const response = await api.get('/ai/health');
      return response.data;
    } catch (error) {
      throw error.response?.data || error;
    }
  }
};
```

### 3-2. ì±„íŒ… ì»´í¬ë„ŒíŠ¸ ğŸ’¬
```javascript
// frontend/src/components/chat/ChatInterface.js
import React, { useState, useEffect, useRef } from 'react';
import { aiService } from '../../services/aiService';
import Loading from '../common/Loading';
import Alert from '../common/Alert';
import './Chat.css';

const ChatInterface = ({ user, selectedFile }) => {
  const [messages, setMessages] = useState([]);
  const [currentMessage, setCurrentMessage] = useState('');
  const [loading, setLoading] = useState(false);
  const [alert, setAlert] = useState(null);
  const messagesEndRef = useRef(null);

  // ë©”ì‹œì§€ ëª©ë¡ ëìœ¼ë¡œ ìŠ¤í¬ë¡¤
  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  };

  useEffect(() => {
    scrollToBottom();
  }, [messages]);

  // ì±„íŒ… ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
  useEffect(() => {
    loadChatHistory();
  }, [user.id]);

  const loadChatHistory = async () => {
    try {
      const response = await aiService.getChatHistory(user.id);
      if (response.success) {
        // ìµœê·¼ 5ê°œ ë©”ì‹œì§€ë§Œ í‘œì‹œ
        const recentMessages = response.data.slice(0, 5).reverse().map(chat => [
          { type: 'user', content: chat.question, timestamp: chat.createdAt },
          { type: 'ai', content: chat.answer, timestamp: chat.createdAt }
        ]).flat();
        setMessages(recentMessages);
      }
    } catch (error) {
      console.error('ì±„íŒ… ê¸°ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
    }
  };

  // ë©”ì‹œì§€ ì „ì†¡
  const sendMessage = async () => {
    if (!currentMessage.trim()) return;

    const userMessage = {
      type: 'user',
      content: currentMessage,
      timestamp: new Date()
    };

    setMessages(prev => [...prev, userMessage]);
    setCurrentMessage('');
    setLoading(true);
    setAlert(null);

    try {
      const response = await aiService.chat(
        currentMessage,
        user.id,
        selectedFile?.id
      );

      if (response.success && response.data.success) {
        const aiMessage = {
          type: 'ai',
          content: response.data.answer,
          timestamp: new Date()
        };
        setMessages(prev => [...prev, aiMessage]);
      } else {
        setAlert({
          type: 'error',
          message: response.data.message || 'AI ì‘ë‹µ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'
        });
      }
    } catch (error) {
      setAlert({
        type: 'error',
        message: 'ì±„íŒ… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
      });
      console.error('ì±„íŒ… ì˜¤ë¥˜:', error);
    } finally {
      setLoading(false);
    }
  };

  // ì—”í„°í‚¤ë¡œ ë©”ì‹œì§€ ì „ì†¡
  const handleKeyPress = (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  };

  // ì˜ˆì‹œ ì§ˆë¬¸ë“¤
  const exampleQuestions = [
    "ì´ ë¬¸ì„œì˜ ì£¼ìš” ë‚´ìš©ì„ ìš”ì•½í•´ì£¼ì„¸ìš”",
    "í•µì‹¬ í¬ì¸íŠ¸ë¥¼ 3ê°€ì§€ë¡œ ì •ë¦¬í•´ì£¼ì„¸ìš”",
    "ì´í•´í•˜ê¸° ì–´ë ¤ìš´ ë¶€ë¶„ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”",
    "ë¬¸ì„œì™€ ê´€ë ¨ëœ í€´ì¦ˆë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”"
  ];

  return (
    <div className="chat-interface">
      <div className="chat-header">
        <h3>ğŸ¤– AI í•™ìŠµ ë„ìš°ë¯¸</h3>
        {selectedFile && (
          <div className="selected-file-info">
            ğŸ“„ {selectedFile.originalFilename}
          </div>
        )}
      </div>

      {alert && (
        <Alert
          type={alert.type}
          message={alert.message}
          onClose={() => setAlert(null)}
        />
      )}

      <div className="chat-messages">
        {messages.length === 0 ? (
          <div className="welcome-message">
            <div className="ai-avatar">ğŸ¤–</div>
            <div className="welcome-text">
              <h4>ì•ˆë…•í•˜ì„¸ìš”! AI í•™ìŠµ ë„ìš°ë¯¸ì…ë‹ˆë‹¤.</h4>
              <p>ê¶ê¸ˆí•œ ê²ƒì´ ìˆìœ¼ë©´ ì–¸ì œë“  ë¬¼ì–´ë³´ì„¸ìš”!</p>
              {selectedFile && (
                <p>í˜„ì¬ <strong>{selectedFile.originalFilename}</strong> íŒŒì¼ì— ëŒ€í•´ ì§ˆë¬¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
              )}
            </div>
          </div>
        ) : (
          messages.map((message, index) => (
            <div key={index} className={`message ${message.type}`}>
              <div className="message-avatar">
                {message.type === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–'}
              </div>
              <div className="message-content">
                <div className="message-text">{message.content}</div>
                <div className="message-time">
                  {new Date(message.timestamp).toLocaleTimeString()}
                </div>
              </div>
            </div>
          ))
        )}

        {loading && (
          <div className="message ai">
            <div className="message-avatar">ğŸ¤–</div>
            <div className="message-content">
              <div className="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          </div>
        )}

        <div ref={messagesEndRef} />
      </div>

      {/* ì˜ˆì‹œ ì§ˆë¬¸ë“¤ (ë©”ì‹œì§€ê°€ ì—†ì„ ë•Œë§Œ í‘œì‹œ) */}
      {messages.length === 0 && (
        <div className="example-questions">
          <p>ğŸ’¡ ì´ëŸ° ì§ˆë¬¸ì„ í•´ë³´ì„¸ìš”:</p>
          <div className="example-buttons">
            {exampleQuestions.map((question, index) => (
              <button
                key={index}
                className="example-button"
                onClick={() => setCurrentMessage(question)}
              >
                {question}
              </button>
            ))}
          </div>
        </div>
      )}

      <div className="chat-input">
        <div className="input-container">
          <textarea
            value={currentMessage}
            onChange={(e) => setCurrentMessage(e.target.value)}
            onKeyPress={handleKeyPress}
            placeholder={selectedFile ? 
              "íŒŒì¼ì— ëŒ€í•´ ì§ˆë¬¸í•´ë³´ì„¸ìš”..." : 
              "ë¬´ì—‡ì´ë“  ì§ˆë¬¸í•´ë³´ì„¸ìš”..."
            }
            disabled={loading}
            rows={1}
          />
          <button
            onClick={sendMessage}
            disabled={!currentMessage.trim() || loading}
            className="send-button"
          >
            {loading ? 'â³' : 'ğŸ“¤'}
          </button>
        </div>
      </div>
    </div>
  );
};

export default ChatInterface;
```

### 3-3. ì±„íŒ… ìŠ¤íƒ€ì¼ ğŸ¨
```css
/* frontend/src/components/chat/Chat.css */
.chat-interface {
  background: white;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
  height: 600px;
  overflow: hidden;
}

.chat-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.chat-header h3 {
  margin: 0;
  font-size: 18px;
}

.selected-file-info {
  background: rgba(255, 255, 255, 0.2);
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 12px;
}

.chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.welcome-message {
  display: flex;
  align-items: flex-start;
  gap: 15px;
  padding: 20px;
  background: #f8f9ff;
  border-radius: 10px;
  margin-bottom: 20px;
}

.ai-avatar {
  font-size: 40px;
}

.welcome-text h4 {
  margin: 0 0 5px 0;
  color: #333;
}

.welcome-text p {
  margin: 5px 0;
  color: #666;
  line-height: 1.5;
}

.message {
  display: flex;
  gap: 10px;
  max-width: 80%;
}

.message.user {
  align-self: flex-end;
  flex-direction: row-reverse;
}

.message.ai {
  align-self: flex-start;
}

.message-avatar {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  flex-shrink: 0;
}

.message.user .message-avatar {
  background: #667eea;
}

.message.ai .message-avatar {
  background: #f1f3f4;
}

.message-content {
  display: flex;
  flex-direction: column;
}

.message-text {
  background: #f1f3f4;
  padding: 12px 16px;
  border-radius: 18px;
  word-wrap: break-word;
  line-height: 1.4;
}

.message.user .message-text {
  background: #667eea;
  color: white;
}

.message-time {
  font-size: 11px;
  color: #999;
  margin-top: 5px;
  text-align: right;
}

.message.user .message-time {
  text-align: left;
}

.typing-indicator {
  display: flex;
  gap: 4px;
  padding: 12px 16px;
  background: #f1f3f4;
  border-radius: 18px;
}

.typing-indicator span {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #999;
  animation: typing 1.4s infinite ease-in-out;
}

.typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
.typing-indicator span:nth-child(2) { animation-delay: -0.16s; }

@keyframes typing {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1); }
}

.example-questions {
  padding: 0 20px 20px;
  text-align: center;
}

.example-questions p {
  margin-bottom: 15px;
  color: #666;
  font-size: 14px;
}

.example-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}

.example-button {
  background: #f8f9ff;
  border: 1px solid #e2e8f0;
  color: #667eea;
  padding: 8px 12px;
  border-radius: 20px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.example-button:hover {
  background: #667eea;
  color: white;
}

.chat-input {
  border-top: 1px solid #e2e8f0;
  padding: 15px 20px;
}

.input-container {
  display: flex;
  gap: 10px;
  align-items: flex-end;
}

.input-container textarea {
  flex: 1;
  border: 1px solid #e2e8f0;
  border-radius: 20px;
  padding: 10px 15px;
  resize: none;
  outline: none;
  font-family: inherit;
  font-size: 14px;
  line-height: 1.4;
  max-height: 100px;
  min-height: 40px;
}

.input-container textarea:focus {
  border-color: #667eea;
}

.send-button {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  background: #667eea;
  color: white;
  cursor: pointer;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

.send-button:hover:not(:disabled) {
  background: #5a67d8;
  transform: scale(1.05);
}

.send-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
@media (max-width: 768px) {
  .chat-interface {
    height: 500px;
  }
  
  .message {
    max-width: 90%;
  }
  
  .example-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .example-button {
    width: 100%;
    max-width: 250px;
  }
}
```

### 3-4. íŒŒì¼ ì„ íƒ ì»´í¬ë„ŒíŠ¸ ğŸ“‚
```javascript
// frontend/src/components/file/FileSelector.js
import React from 'react';
import './File.css';

const FileSelector = ({ files, selectedFile, onFileSelect }) => {
  return (
    <div className="file-selector">
      <h4>ğŸ“‚ AIì™€ ëŒ€í™”í•  íŒŒì¼ ì„ íƒ</h4>
      
      {files.length === 0 ? (
        <div className="no-files">
          <p>ì—…ë¡œë“œëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
          <p>ë¨¼ì € íŒŒì¼ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.</p>
        </div>
      ) : (
        <div className="file-options">
          <div 
            className={`file-option ${!selectedFile ? 'selected' : ''}`}
            onClick={() => onFileSelect(null)}
          >
            <div className="file-icon">ğŸ’¬</div>
            <div className="file-details">
              <div className="file-name">ì¼ë°˜ ëŒ€í™”</div>
              <div className="file-description">íŒŒì¼ ì—†ì´ AIì™€ ììœ ë¡­ê²Œ ëŒ€í™”</div>
            </div>
          </div>
          
          {files.map((file) => (
            <div 
              key={file.id}
              className={`file-option ${selectedFile?.id === file.id ? 'selected' : ''}`}
              onClick={() => onFileSelect(file)}
            >
              <div className="file-icon">
                {file.originalFilename.endsWith('.pdf') && 'ğŸ“„'}
                {file.originalFilename.endsWith('.txt') && 'ğŸ“'}
                {file.originalFilename.endsWith('.docx') && 'ğŸ“˜'}
              </div>
              <div className="file-details">
                <div className="file-name">{file.originalFilename}</div>
                <div className="file-description">
                  {new Date(file.uploadedAt).toLocaleDateString()}
                </div>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );
};

export default FileSelector;
```

## 4. ëŒ€ì‹œë³´ë“œì— AI ì±„íŒ… ì¶”ê°€

### 4-1. ì—…ë°ì´íŠ¸ëœ ëŒ€ì‹œë³´ë“œ ğŸ 
```javascript
// frontend/src/pages/Dashboard.js (ì—…ë°ì´íŠ¸)
import React, { useState, useEffect } from 'react';
import FileUpload from '../components/file/FileUpload';
import FileList from '../components/file/FileList';
import FileSelector from '../components/file/FileSelector';
import ChatInterface from '../components/chat/ChatInterface';
import { fileService } from '../services/fileService';
import { aiService } from '../services/aiService';
import Alert from '../components/common/Alert';
import './Dashboard.css';

const Dashboard = ({ user, onLogout }) => {
  const [refreshTrigger, setRefreshTrigger] = useState(0);
  const [userFiles, setUserFiles] = useState([]);
  const [selectedFile, setSelectedFile] = useState(null);
  const [activeTab, setActiveTab] = useState('files'); // 'files' ë˜ëŠ” 'chat'
  const [aiHealthy, setAiHealthy] = useState(false);
  const [alert, setAlert] = useState(null);

  // íŒŒì¼ ëª©ë¡ ë¡œë“œ
  useEffect(() => {
    loadUserFiles();
    checkAIHealth();
  }, [user.id, refreshTrigger]);

  const loadUserFiles = async () => {
    try {
      const response = await fileService.getUserFiles(user.id);
      if (response.success) {
        setUserFiles(response.data);
      }
    } catch (error) {
      console.error('íŒŒì¼ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
    }
  };

  const checkAIHealth = async () => {
    try {
      const response = await aiService.checkHealth();
      setAiHealthy(response.success && response.data.ai_service_healthy);
    } catch (error) {
      setAiHealthy(false);
      console.error('AI ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì‹¤íŒ¨:', error);
    }
  };

  const handleUploadSuccess = () => {
    setRefreshTrigger(prev => prev + 1);
    setAlert({
      type: 'success',
      message: 'íŒŒì¼ì´ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤! ì´ì œ AIì™€ ëŒ€í™”í•´ë³´ì„¸ìš”.'
    });
  };

  const handleFileSelect = (file) => {
    setSelectedFile(file);
    setActiveTab('chat');
  };

  return (
    <div className="dashboard-container">
      {/* í—¤ë” */}
      <header className="dashboard-header">
        <div className="header-content">
          <h1>ğŸ“š AI í•™ìŠµë„ìš°ë¯¸</h1>
          <div className="header-status">
            <div className={`ai-status ${aiHealthy ? 'healthy' : 'error'}`}>
              ğŸ¤– AI {aiHealthy ? 'ì—°ê²°ë¨' : 'ì—°ê²° ì•ˆë¨'}
            </div>
            <div className="user-info">
              <span>ì•ˆë…•í•˜ì„¸ìš”, {user.name}ë‹˜! ğŸ‘‹</span>
              <button className="logout-button" onClick={onLogout}>
                ë¡œê·¸ì•„ì›ƒ
              </button>
            </div>
          </div>
        </div>
      </header>

      {/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */}
      <nav className="tab-navigation">
        <div className="tab-container">
          <button
            className={`tab-button ${activeTab === 'files' ? 'active' : ''}`}
            onClick={() => setActiveTab('files')}
          >
            ğŸ“ íŒŒì¼ ê´€ë¦¬
          </button>
          <button
            className={`tab-button ${activeTab === 'chat' ? 'active' : ''}`}
            onClick={() => setActiveTab('chat')}
          >
            ğŸ’¬ AI ì±„íŒ…
          </button>
        </div>
      </nav>

      {alert && (
        <div className="dashboard-alert">
          <Alert
            type={alert.type}
            message={alert.message}
            onClose={() => setAlert(null)}
          />
        </div>
      )}

      {/* ë©”ì¸ ì½˜í…ì¸  */}
      <main className="dashboard-main">
        <div className="dashboard-content">
          {activeTab === 'files' ? (
            // íŒŒì¼ ê´€ë¦¬ íƒ­
            <>
              <section className="upload-section">
                <FileUpload 
                  userId={user.id} 
                  onUploadSuccess={handleUploadSuccess}
                />
              </section>

              <section className="file-list-section">
                <FileList 
                  userId={user.id} 
                  refreshTrigger={refreshTrigger}
                />
              </section>

              {userFiles.length > 0 && (
                <section className="file-chat-section">
                  <div className="chat-invitation">
                    <h3>ğŸš€ AIì™€ ëŒ€í™”í•´ë³´ì„¸ìš”!</h3>
                    <p>ì—…ë¡œë“œí•œ íŒŒì¼ì— ëŒ€í•´ AIì—ê²Œ ì§ˆë¬¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <button 
                      className="start-chat-button"
                      onClick={() => setActiveTab('chat')}
                    >
                      ì±„íŒ… ì‹œì‘í•˜ê¸°
                    </button>
                  </div>
                </section>
              )}
            </>
          ) : (
            // AI ì±„íŒ… íƒ­
            <div className="chat-section">
              <div className="chat-layout">
                <aside className="file-selector-sidebar">
                  <FileSelector 
                    files={userFiles}
                    selectedFile={selectedFile}
                    onFileSelect={handleFileSelect}
                  />
                </aside>
                
                <main className="chat-main">
                  {aiHealthy ? (
                    <ChatInterface 
                      user={user}
                      selectedFile={selectedFile}
                    />
                  ) : (
                    <div className="ai-unavailable">
                      <div className="ai-error-icon">âš ï¸</div>
                      <h3>AI ì„œë¹„ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h3>
                      <p>AI ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ì—°ê²°ì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.</p>
                      <button onClick={checkAIHealth} className="retry-button">
                        ë‹¤ì‹œ ì‹œë„
                      </button>
                    </div>
                  )}
                </main>
              </div>
            </div>
          )}
        </div>
      </main>
    </div>
  );
};

export default Dashboard;
```

### 4-2. ëŒ€ì‹œë³´ë“œ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸ ğŸ¨
```css
/* frontend/src/pages/Dashboard.css (ì¶”ê°€ ìŠ¤íƒ€ì¼) */

/* í—¤ë” ìƒíƒœ í‘œì‹œ */
.header-status {
  display: flex;
  align-items: center;
  gap: 20px;
}

.ai-status {
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 12px;
  font-weight: 500;
}

.ai-status.healthy {
  background: #d4edda;
  color: #155724;
}

.ai-status.error {
  background: #f8d7da;
  color: #721c24;
}

/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
.tab-navigation {
  background: white;
  border-bottom: 1px solid #e2e8f0;
  position: sticky;
  top: 70px;
  z-index: 50;
}

.tab-container {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  padding: 0 20px;
}

.tab-button {
  background: none;
  border: none;
  padding: 15px 20px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  color: #666;
  border-bottom: 3px solid transparent;
  transition: all 0.2s;
}

.tab-button.active {
  color: #667eea;
  border-bottom-color: #667eea;
}

.tab-button:hover {
  color: #667eea;
  background: #f8f9ff;
}

/* ëŒ€ì‹œë³´ë“œ ì•Œë¦¼ */
.dashboard-alert {
  max-width: 1200px;
  margin: 20px auto;
  padding: 0 20px;
}

/* ì±„íŒ… ì„¹ì…˜ */
.chat-section {
  padding: 20px;
}

.chat-layout {
  max-width: 1200px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 20px;
  height: 600px;
}

.file-selector-sidebar {
  background: white;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  overflow-y: auto;
}

.chat-main {
  display: flex;
  flex-direction: column;
}

/* íŒŒì¼ ì„ íƒê¸° ìŠ¤íƒ€ì¼ */
.file-selector h4 {
  margin: 0 0 20px 0;
  color: #333;
  font-size: 16px;
}

.no-files {
  text-align: center;
  padding: 20px;
  color: #666;
}

.file-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.file-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  border: 2px solid #e2e8f0;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.file-option:hover {
  border-color: #667eea;
  background: #f8f9ff;
}

.file-option.selected {
  border-color: #667eea;
  background: #667eea;
  color: white;
}

.file-option .file-icon {
  font-size: 24px;
  flex-shrink: 0;
}

.file-option .file-details {
  flex: 1;
}

.file-option .file-name {
  font-weight: 500;
  font-size: 14px;
  margin-bottom: 2px;
}

.file-option .file-description {
  font-size: 12px;
  opacity: 0.7;
}

/* ì±„íŒ… ì´ˆëŒ€ ì„¹ì…˜ */
.chat-invitation {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  margin-top: 20px;
}

.chat-invitation h3 {
  margin: 0 0 10px 0;
  font-size: 24px;
}

.chat-invitation p {
  margin: 0 0 20px 0;
  opacity: 0.9;
}

.start-chat-button {
  background: white;
  color: #667eea;
  border: none;
  padding: 12px 24px;
  border-radius: 25px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.start-chat-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

/* AI ì„œë¹„ìŠ¤ ë¶ˆê°€ ìƒíƒœ */
.ai-unavailable {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  background: white;
  border-radius: 10px;
  padding: 40px;
  text-align: center;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.ai-error-icon {
  font-size: 60px;
  margin-bottom: 20px;
}

.ai-unavailable h3 {
  color: #e53e3e;
  margin: 0 0 10px 0;
}

.ai-unavailable p {
  color: #666;
  margin: 0 0 20px 0;
  line-height: 1.5;
}

.retry-button {
  background: #667eea;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.retry-button:hover {
  background: #5a67d8;
}

/* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
@media (max-width: 1024px) {
  .chat-layout {
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr;
    height: auto;
  }
  
  .file-selector-sidebar {
    height: auto;
    max-height: 200px;
  }
  
  .chat-main {
    height: 500px;
  }
}

@media (max-width: 768px) {
  .header-status {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .tab-container {
    padding: 0 10px;
  }
  
  .tab-button {
    padding: 12px 15px;
    font-size: 13px;
  }
  
  .chat-section {
    padding: 10px;
  }
  
  .file-selector-sidebar {
    padding: 15px;
  }
}
```

## 5. ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸

### 5-1. ëª¨ë“  ì„œë¹„ìŠ¤ ì‹¤í–‰ ğŸš€
```bash
# í„°ë¯¸ë„ 1: AI ì„œë¹„ìŠ¤
cd ai-module
source venv/bin/activate  # Mac/Linux
# ë˜ëŠ” venv\Scripts\activate  # Windows
python main.py

# í„°ë¯¸ë„ 2: Backend ì„œë¹„ìŠ¤
cd backend
./mvnw spring-boot:run

# í„°ë¯¸ë„ 3: Frontend ì„œë¹„ìŠ¤
cd frontend
npm start
```

### 5-2. ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ âœ…

**AI ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸:**
- [ ] AI ì„œë¹„ìŠ¤ê°€ ì •ìƒ ì‹¤í–‰ë˜ëŠ”ê°€? (http://localhost:8000)
- [ ] Swagger ë¬¸ì„œê°€ ì ‘ê·¼ ê°€ëŠ¥í•œê°€? (http://localhost:8000/docs)
- [ ] í—¬ìŠ¤ì²´í¬ê°€ ì •ìƒì¸ê°€? (http://localhost:8000/health)

**Backend ì—°ë™ í…ŒìŠ¤íŠ¸:**
- [ ] AI ì±„íŒ… APIê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ê°€?
- [ ] íŒŒì¼ ë‚´ìš©ì´ AIì—ê²Œ ì „ë‹¬ë˜ëŠ”ê°€?
- [ ] ì±„íŒ… ê¸°ë¡ì´ ì €ì¥ë˜ëŠ”ê°€?

**Frontend í…ŒìŠ¤íŠ¸:**
- [ ] AI ì±„íŒ… í™”ë©´ì´ ì •ìƒ í‘œì‹œë˜ëŠ”ê°€?
- [ ] ë©”ì‹œì§€ ì „ì†¡ì´ ì •ìƒ ì‘ë™í•˜ëŠ”ê°€?
- [ ] íŒŒì¼ ì„ íƒ ê¸°ëŠ¥ì´ ì •ìƒì¸ê°€?
- [ ] AI ì„œë¹„ìŠ¤ ìƒíƒœê°€ ì •í™•íˆ í‘œì‹œë˜ëŠ”ê°€?

### 5-3. ì˜ˆìƒ ì§ˆë¬¸ê³¼ ë‹µë³€ ì˜ˆì‹œ ğŸ’­

**íŒŒì¼ ì—†ì´ ì¼ë°˜ ëŒ€í™”:**
- ì§ˆë¬¸: "ì•ˆë…•í•˜ì„¸ìš”!"
- ì˜ˆìƒ ë‹µë³€: "ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” AI í•™ìŠµ ë„ìš°ë¯¸ì…ë‹ˆë‹¤. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?"

**íŒŒì¼ ê¸°ë°˜ ì§ˆë¬¸:**
- ì§ˆë¬¸: "ì´ ë¬¸ì„œì˜ ì£¼ìš” ë‚´ìš©ì„ ìš”ì•½í•´ì£¼ì„¸ìš”"
- ì˜ˆìƒ ë‹µë³€: ì—…ë¡œë“œí•œ íŒŒì¼ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ìš”ì•½

**í•™ìŠµ ë„ì›€ ì§ˆë¬¸:**
- ì§ˆë¬¸: "ì´í•´í•˜ê¸° ì–´ë ¤ìš´ ë¶€ë¶„ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”"
- ì˜ˆìƒ ë‹µë³€: ë¬¸ì„œì˜ ë³µì¡í•œ ê°œë…ì„ ì‰½ê²Œ ì„¤ëª…

## 6. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ

### 6-1. AI ì„œë¹„ìŠ¤ ë¬¸ì œ ğŸ”§

**OpenAI API í‚¤ ì˜¤ë¥˜:**
```bash
# .env íŒŒì¼ í™•ì¸
cat ai-module/.env

# API í‚¤ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
# https://platform.openai.com/api-keys
```

**Python íŒ¨í‚¤ì§€ ì˜¤ë¥˜:**
```bash
cd ai-module
pip install --upgrade pip
pip install -r requirements.txt
```

**CORS ì˜¤ë¥˜:**
- FastAPIì˜ CORS ì„¤ì • í™•ì¸
- allow_originsì— ì˜¬ë°”ë¥¸ URL í¬í•¨ ì—¬ë¶€ í™•ì¸

### 6-2. Backend ì—°ë™ ë¬¸ì œ ğŸ”§

**AI ì„œë¹„ìŠ¤ ì—°ê²° ì‹¤íŒ¨:**
- AI ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸ (http://localhost:8000)
- Backend ë¡œê·¸ì—ì„œ ì—°ê²° ì˜¤ë¥˜ ë©”ì‹œì§€ í™•ì¸
- ë°©í™”ë²½ ì„¤ì • í™•ì¸

**WebClient ì„¤ì • ì˜¤ë¥˜:**
```java
// WebClient ë””ë²„ê¹…ì„ ìœ„í•œ ë¡œê·¸ ì¶”ê°€
@Bean
public WebClient aiServiceWebClient() {
    return WebClient.builder()
            .baseUrl("http://localhost:8000")
            .filter(ExchangeFilterFunctions.basicAuthentication("user", "pass"))
            .build();
}
```

### 6-3. Frontend ì—°ë™ ë¬¸ì œ ğŸ”§

**API í˜¸ì¶œ ì‹¤íŒ¨:**
- ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì˜ Network íƒ­ í™•ì¸
- Backend ì„œë²„ ìƒíƒœ í™•ì¸
- CORS ì •ì±… í™•ì¸

**ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ ë¬¸ì œ:**
- React ì»´í¬ë„ŒíŠ¸ ìƒíƒœ í™•ì¸
- Console ì˜¤ë¥˜ ë©”ì‹œì§€ í™•ì¸
- API ì‘ë‹µ í˜•ì‹ í™•ì¸

## 7. ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„

### 7-1. ì˜¤ëŠ˜ ì™„ì„±ëœ ê²ƒë“¤ âœ…
- [ ] ê°„ë‹¨í•œ AI ì±„íŒ… API ì„œë²„
- [ ] Backendì™€ AI ì„œë¹„ìŠ¤ ì—°ë™
- [ ] Frontend AI ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
- [ ] íŒŒì¼ ê¸°ë°˜ ì§ˆì˜ì‘ë‹µ ê¸°ëŠ¥
- [ ] ê¸°ë³¸ì ì¸ ì±„íŒ… ê¸°ë¡ ì €ì¥

### 7-2. ë‚´ì¼ í•  ì¼ ğŸ“
- ì „ì²´ ì‹œìŠ¤í…œ í†µí•© ë° í…ŒìŠ¤íŠ¸
- í€´ì¦ˆ ìƒì„± ê¸°ëŠ¥ ì™„ì„±
- ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- ë°°í¬ ì¤€ë¹„

### 7-3. ì¶”ê°€ ê°œì„ ì‚¬í•­ (ì‹œê°„ì´ ìˆë‹¤ë©´) ğŸ¯
- PDF íŒŒì¼ ë‚´ìš© ì½ê¸° ê°œì„ 
- ì±„íŒ… íˆìŠ¤í† ë¦¬ ê²€ìƒ‰ ê¸°ëŠ¥
- AI ì‘ë‹µ ì†ë„ ê°œì„ 
- ë” ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™” íë¦„

## 8. ë³´ë„ˆìŠ¤: ê°„ë‹¨í•œ í€´ì¦ˆ ê¸°ëŠ¥

### 8-1. í€´ì¦ˆ ì»´í¬ë„ŒíŠ¸ (ì„ íƒì‚¬í•­) ğŸ§©
```javascript
// frontend/src/components/quiz/QuizDisplay.js
import React, { useState } from 'react';
import { aiService } from '../../services/aiService';
import Loading from '../common/Loading';
import Alert from '../common/Alert';

const QuizDisplay = ({ user, selectedFile }) => {
  const [quiz, setQuiz] = useState('');
  const [loading, setLoading] = useState(false);
  const [alert, setAlert] = useState(null);

  const generateQuiz = async () => {
    if (!selectedFile) {
      setAlert({ type: 'error', message: 'í€´ì¦ˆë¥¼ ìƒì„±í•  íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.' });
      return;
    }

    setLoading(true);
    setAlert(null);

    try {
      const response = await aiService.generateQuiz(user.id, selectedFile.id);
      
      if (response.success && response.data.success) {
        setQuiz(response.data.quiz);
      } else {
        setAlert({ type: 'error', message: 'í€´ì¦ˆ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.' });
      }
    } catch (error) {
      setAlert({ type: 'error', message: 'í€´ì¦ˆ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' });
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="quiz-display">
      <div className="quiz-header">
        <h3>ğŸ“ AI í€´ì¦ˆ ìƒì„±ê¸°</h3>
        <button onClick={generateQuiz} disabled={loading || !selectedFile}>
          {loading ? 'ìƒì„± ì¤‘...' : 'í€´ì¦ˆ ìƒì„±'}
        </button>
      </div>

      {alert && <Alert type={alert.type} message={alert.message} onClose={() => setAlert(null)} />}
      
      {loading && <Loading message="AIê°€ í€´ì¦ˆë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤..." />}
      
      {quiz && (
        <div className="quiz-content">
          <pre>{quiz}</pre>
        </div>
      )}
    </div>
  );
};

export default QuizDisplay;
```
